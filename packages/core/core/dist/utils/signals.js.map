{"version":3,"file":"signals.js","sources":["../../src/utils/signals.ts"],"sourcesContent":["import type { Core } from '@strapi/types';\r\n\r\nexport const destroyOnSignal = (strapi: Core.Strapi) => {\r\n  let signalReceived = false;\r\n\r\n  // For unknown reasons, we receive signals 2 times.\r\n  // As a temporary fix, we ignore the signals received after the first one.\r\n\r\n  const terminateStrapi = async () => {\r\n    if (!signalReceived) {\r\n      signalReceived = true;\r\n      await strapi.destroy();\r\n      process.exit();\r\n    }\r\n  };\r\n\r\n  ['SIGTERM', 'SIGINT'].forEach((signal) => {\r\n    process.on(signal, terminateStrapi);\r\n  });\r\n};\r\n"],"names":[],"mappings":";;AAEa,MAAA,kBAAkB,CAAC,WAAwB;AACtD,MAAI,iBAAiB;AAKrB,QAAM,kBAAkB,YAAY;AAClC,QAAI,CAAC,gBAAgB;AACF,uBAAA;AACjB,YAAM,OAAO,QAAQ;AACrB,cAAQ,KAAK;AAAA,IAAA;AAAA,EAEjB;AAEA,GAAC,WAAW,QAAQ,EAAE,QAAQ,CAAC,WAAW;AAChC,YAAA,GAAG,QAAQ,eAAe;AAAA,EAAA,CACnC;AACH;;"}