{"version":3,"file":"SingleSignOnPage-D2mxN9wf.mjs","sources":["../../ee/admin/src/pages/SettingsPage/pages/SingleSignOnPage.tsx"],"sourcesContent":["import {\r\n  Button,\r\n  Flex,\r\n  Grid,\r\n  MultiSelect,\r\n  MultiSelectOption,\r\n  Typography,\r\n  Field,\r\n} from '@strapi/design-system';\r\nimport { Check } from '@strapi/icons';\r\nimport { useIntl } from 'react-intl';\r\nimport * as yup from 'yup';\r\n\r\nimport {\r\n  Form,\r\n  FormHelpers,\r\n  InputProps,\r\n  useField,\r\n} from '../../../../../../admin/src/components/Form';\r\nimport { InputRenderer } from '../../../../../../admin/src/components/FormInputs/Renderer';\r\nimport { Layouts } from '../../../../../../admin/src/components/Layouts/Layout';\r\nimport { Page } from '../../../../../../admin/src/components/PageHelpers';\r\nimport { useTypedSelector } from '../../../../../../admin/src/core/store/hooks';\r\nimport { useNotification } from '../../../../../../admin/src/features/Notifications';\r\nimport { useAdminRoles } from '../../../../../../admin/src/hooks/useAdminRoles';\r\nimport { useAPIErrorHandler } from '../../../../../../admin/src/hooks/useAPIErrorHandler';\r\nimport { useRBAC } from '../../../../../../admin/src/hooks/useRBAC';\r\nimport {\r\n  useGetProviderOptionsQuery,\r\n  useUpdateProviderOptionsMutation,\r\n} from '../../../../../../admin/src/services/auth';\r\nimport { isBaseQueryError } from '../../../../../../admin/src/utils/baseQuery';\r\nimport { translatedErrors } from '../../../../../../admin/src/utils/translatedErrors';\r\nimport { ProvidersOptions } from '../../../../../../shared/contracts/admin';\r\n\r\nconst SCHEMA = yup.object().shape({\r\n  autoRegister: yup.bool().required(translatedErrors.required),\r\n  defaultRole: yup.mixed().when('autoRegister', (value, initSchema) => {\r\n    return value ? initSchema.required(translatedErrors.required) : initSchema.nullable();\r\n  }),\r\n  ssoLockedRoles: yup\r\n    .array()\r\n    .nullable()\r\n    .of(\r\n      yup.mixed().when('ssoLockedRoles', (value, initSchema) => {\r\n        return value ? initSchema.required(translatedErrors.required) : initSchema.nullable();\r\n      })\r\n    ),\r\n});\r\n\r\nexport const SingleSignOnPage = () => {\r\n  const { formatMessage } = useIntl();\r\n  const permissions = useTypedSelector((state) => state.admin_app.permissions);\r\n  const { toggleNotification } = useNotification();\r\n  const {\r\n    _unstableFormatAPIError: formatAPIError,\r\n    _unstableFormatValidationErrors: formatValidationErrors,\r\n  } = useAPIErrorHandler();\r\n\r\n  const { isLoading: isLoadingProviderOptions, data } = useGetProviderOptionsQuery();\r\n\r\n  const [updateProviderOptions, { isLoading: isSubmittingForm }] =\r\n    useUpdateProviderOptionsMutation();\r\n\r\n  const {\r\n    isLoading: isLoadingPermissions,\r\n    allowedActions: { canUpdate, canRead: canReadRoles },\r\n  } = useRBAC({\r\n    ...permissions.settings?.sso,\r\n    readRoles: permissions.settings?.roles.read ?? [],\r\n  });\r\n\r\n  const { roles, isLoading: isLoadingRoles } = useAdminRoles(undefined, {\r\n    skip: !canReadRoles,\r\n  });\r\n\r\n  const handleSubmit = async (\r\n    body: ProvidersOptions.Request['body'],\r\n    helpers: FormHelpers<ProvidersOptions.Request['body']>\r\n  ) => {\r\n    try {\r\n      const res = await updateProviderOptions(body);\r\n\r\n      if ('error' in res) {\r\n        if (isBaseQueryError(res.error) && res.error.name === 'ValidationError') {\r\n          helpers.setErrors(formatValidationErrors(res.error));\r\n        } else {\r\n          toggleNotification({\r\n            type: 'danger',\r\n            message: formatAPIError(res.error),\r\n          });\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      toggleNotification({\r\n        type: 'success',\r\n        message: formatMessage({ id: 'notification.success.saved' }),\r\n      });\r\n    } catch (err) {\r\n      toggleNotification({\r\n        type: 'danger',\r\n        message: formatMessage({\r\n          id: 'notification.error',\r\n          defaultMessage: 'An error occurred, please try again.',\r\n        }),\r\n      });\r\n    }\r\n  };\r\n\r\n  const isLoadingData = isLoadingRoles || isLoadingPermissions || isLoadingProviderOptions;\r\n\r\n  return (\r\n    <Layouts.Root>\r\n      <Page.Title>\r\n        {formatMessage(\r\n          { id: 'Settings.PageTitle', defaultMessage: 'Settings - {name}' },\r\n          {\r\n            name: 'SSO',\r\n          }\r\n        )}\r\n      </Page.Title>\r\n      <Page.Main aria-busy={isSubmittingForm || isLoadingData} tabIndex={-1}>\r\n        <Form\r\n          method=\"PUT\"\r\n          onSubmit={handleSubmit}\r\n          validationSchema={SCHEMA}\r\n          disabled={!canUpdate}\r\n          initialValues={\r\n            data || {\r\n              autoRegister: false,\r\n              defaultRole: null,\r\n              ssoLockedRoles: null,\r\n            }\r\n          }\r\n        >\r\n          {({ modified, isSubmitting }) => (\r\n            <>\r\n              <Layouts.Header\r\n                primaryAction={\r\n                  <Button\r\n                    disabled={!modified}\r\n                    loading={isSubmitting}\r\n                    startIcon={<Check />}\r\n                    type=\"submit\"\r\n                  >\r\n                    {formatMessage({\r\n                      id: 'global.save',\r\n                      defaultMessage: 'Save',\r\n                    })}\r\n                  </Button>\r\n                }\r\n                title={formatMessage({\r\n                  id: 'Settings.sso.title',\r\n                  defaultMessage: 'Single Sign-On',\r\n                })}\r\n                subtitle={formatMessage({\r\n                  id: 'Settings.sso.description',\r\n                  defaultMessage: 'Configure the settings for the Single Sign-On feature.',\r\n                })}\r\n              />\r\n              <Layouts.Content>\r\n                {isSubmitting || isLoadingData ? (\r\n                  <Page.Loading />\r\n                ) : (\r\n                  <Flex\r\n                    direction=\"column\"\r\n                    alignItems=\"stretch\"\r\n                    gap={4}\r\n                    background=\"neutral0\"\r\n                    padding={6}\r\n                    shadow=\"filterShadow\"\r\n                    hasRadius\r\n                  >\r\n                    <Typography variant=\"delta\" tag=\"h2\">\r\n                      {formatMessage({\r\n                        id: 'global.settings',\r\n                        defaultMessage: 'Settings',\r\n                      })}\r\n                    </Typography>\r\n                    <Grid.Root gap={4}>\r\n                      {[\r\n                        {\r\n                          hint: formatMessage({\r\n                            id: 'Settings.sso.form.registration.description',\r\n                            defaultMessage: 'Create new user on SSO login if no account exists',\r\n                          }),\r\n                          label: formatMessage({\r\n                            id: 'Settings.sso.form.registration.label',\r\n                            defaultMessage: 'Auto-registration',\r\n                          }),\r\n                          name: 'autoRegister',\r\n                          size: 6,\r\n                          type: 'boolean' as const,\r\n                        },\r\n                        {\r\n                          hint: formatMessage({\r\n                            id: 'Settings.sso.form.defaultRole.description',\r\n                            defaultMessage:\r\n                              'It will attach the new authenticated user to the selected role',\r\n                          }),\r\n                          label: formatMessage({\r\n                            id: 'Settings.sso.form.defaultRole.label',\r\n                            defaultMessage: 'Default role',\r\n                          }),\r\n                          name: 'defaultRole',\r\n                          options: roles.map(({ id, name }) => ({\r\n                            label: name,\r\n                            value: id.toString(),\r\n                          })),\r\n                          placeholder: formatMessage({\r\n                            id: 'components.InputSelect.option.placeholder',\r\n                            defaultMessage: 'Choose here',\r\n                          }),\r\n                          size: 6,\r\n                          type: 'enumeration' as const,\r\n                        },\r\n                        {\r\n                          hint: formatMessage({\r\n                            id: 'Settings.sso.form.localAuthenticationLock.description',\r\n                            defaultMessage:\r\n                              'Select the roles for which you want to disable the local authentication',\r\n                          }),\r\n                          label: formatMessage({\r\n                            id: 'Settings.sso.form.localAuthenticationLock.label',\r\n                            defaultMessage: 'Local authentication lock-out',\r\n                          }),\r\n                          name: 'ssoLockedRoles',\r\n                          options: roles.map(({ id, name }) => ({\r\n                            label: name,\r\n                            value: id.toString(),\r\n                          })),\r\n                          placeholder: formatMessage({\r\n                            id: 'components.InputSelect.option.placeholder',\r\n                            defaultMessage: 'Choose here',\r\n                          }),\r\n                          size: 6,\r\n                          type: 'multi' as const,\r\n                        },\r\n                      ].map(({ size, ...field }) => (\r\n                        <Grid.Item\r\n                          key={field.name}\r\n                          col={size}\r\n                          direction=\"column\"\r\n                          alignItems=\"stretch\"\r\n                        >\r\n                          <FormInputRenderer {...field} />\r\n                        </Grid.Item>\r\n                      ))}\r\n                    </Grid.Root>\r\n                  </Flex>\r\n                )}\r\n              </Layouts.Content>\r\n            </>\r\n          )}\r\n        </Form>\r\n      </Page.Main>\r\n    </Layouts.Root>\r\n  );\r\n};\r\n\r\ntype FormInputProps = InputProps | MultiSelectInputProps;\r\n\r\nconst FormInputRenderer = (props: FormInputProps) => {\r\n  switch (props.type) {\r\n    case 'multi':\r\n      return <MultiSelectInput {...props} />;\r\n    default:\r\n      return <InputRenderer {...props} />;\r\n  }\r\n};\r\n\r\ntype MultiSelectInputProps = Omit<Extract<InputProps, { type: 'enumeration' }>, 'type'> & {\r\n  type: 'multi';\r\n};\r\n\r\nconst MultiSelectInput = ({ hint, label, name, options, ...props }: MultiSelectInputProps) => {\r\n  const field = useField(name);\r\n\r\n  return (\r\n    <Field.Root name={name} hint={hint} error={field.error}>\r\n      <Field.Label>{label}</Field.Label>\r\n      <MultiSelect\r\n        onChange={(value) => field.onChange('ssoLockedRoles', value)}\r\n        onClear={() => field.onChange('ssoLockedRoles', [])}\r\n        value={field.value ?? []}\r\n        withTags\r\n        {...props}\r\n      >\r\n        {options.map(({ label, value }) => (\r\n          <MultiSelectOption key={value} value={value}>\r\n            {label}\r\n          </MultiSelectOption>\r\n        ))}\r\n      </MultiSelect>\r\n      <Field.Hint />\r\n      <Field.Error />\r\n    </Field.Root>\r\n  );\r\n};\r\n\r\nexport const ProtectedSSO = () => {\r\n  const permissions = useTypedSelector((state) => state.admin_app.permissions.settings?.sso?.main);\r\n\r\n  return (\r\n    <Page.Protect permissions={permissions}>\r\n      <SingleSignOnPage />\r\n    </Page.Protect>\r\n  );\r\n};\r\n"],"names":["translatedErrors","InputRenderer","label"],"mappings":"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"}