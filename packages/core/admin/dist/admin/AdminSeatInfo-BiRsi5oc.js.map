{"version":3,"file":"AdminSeatInfo-BiRsi5oc.js","sources":["../../ee/admin/src/pages/SettingsPage/pages/ApplicationInfoPage/components/AdminSeatInfo.tsx"],"sourcesContent":["import { Flex, Tooltip, Typography, Link, Grid } from '@strapi/design-system';\r\nimport { ExternalLink, WarningCircle } from '@strapi/icons';\r\nimport { useIntl } from 'react-intl';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport { useRBAC } from '../../../../../../../../admin/src/hooks/useRBAC';\r\nimport { selectAdminPermissions } from '../../../../../../../../admin/src/selectors';\r\nimport { useLicenseLimits } from '../../../../../hooks/useLicenseLimits';\r\n\r\nconst BILLING_STRAPI_CLOUD_URL = 'https://cloud.strapi.io/profile/billing';\r\nconst BILLING_SELF_HOSTED_URL = 'https://strapi.io/billing/request-seats';\r\n\r\nexport const AdminSeatInfoEE = () => {\r\n  const { formatMessage } = useIntl();\r\n  const { settings } = useSelector(selectAdminPermissions);\r\n  const {\r\n    isLoading: isRBACLoading,\r\n    allowedActions: { canRead, canCreate, canUpdate, canDelete },\r\n  } = useRBAC(settings?.users ?? {});\r\n  const {\r\n    license,\r\n    isError,\r\n    isLoading: isLicenseLoading,\r\n  } = useLicenseLimits({\r\n    // TODO: this creates a waterfall which we should avoid to render earlier, but for that\r\n    // we will have to move away from data-fetching hooks to query functions.\r\n    // Short-term we could at least implement a loader, for the user to have visual feedback\r\n    // in case the requests take a while\r\n    enabled: !isRBACLoading && canRead && canCreate && canUpdate && canDelete,\r\n  });\r\n\r\n  const isLoading = isRBACLoading || isLicenseLoading;\r\n\r\n  if (isError || isLoading || !license) {\r\n    return null;\r\n  }\r\n\r\n  const { licenseLimitStatus, enforcementUserCount, permittedSeats, isHostedOnStrapiCloud } =\r\n    license;\r\n\r\n  if (!permittedSeats) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Grid.Item col={6} s={12} direction=\"column\" alignItems=\"stretch\">\r\n      <Typography variant=\"sigma\" textColor=\"neutral600\">\r\n        {formatMessage({\r\n          id: 'Settings.application.admin-seats',\r\n          defaultMessage: 'Admin seats',\r\n        })}\r\n      </Typography>\r\n      <Flex gap={2}>\r\n        <Flex>\r\n          <Typography tag=\"p\">\r\n            {formatMessage(\r\n              {\r\n                id: 'Settings.application.ee.admin-seats.count',\r\n                defaultMessage: '<text>{enforcementUserCount}</text>/{permittedSeats}',\r\n              },\r\n              {\r\n                permittedSeats,\r\n                enforcementUserCount,\r\n                text: (chunks) =>\r\n                  (\r\n                    <Typography\r\n                      fontWeight=\"semiBold\"\r\n                      textColor={enforcementUserCount > permittedSeats ? 'danger500' : undefined}\r\n                    >\r\n                      {chunks}\r\n                    </Typography>\r\n                  ) as any,\r\n              }\r\n            )}\r\n          </Typography>\r\n        </Flex>\r\n        {licenseLimitStatus === 'OVER_LIMIT' && (\r\n          <Tooltip\r\n            label={formatMessage({\r\n              id: 'Settings.application.ee.admin-seats.at-limit-tooltip',\r\n              defaultMessage: 'At limit: add seats to invite more users',\r\n            })}\r\n          >\r\n            <WarningCircle width=\"1.4rem\" height=\"1.4rem\" fill=\"danger500\" />\r\n          </Tooltip>\r\n        )}\r\n      </Flex>\r\n      <Link\r\n        href={isHostedOnStrapiCloud ? BILLING_STRAPI_CLOUD_URL : BILLING_SELF_HOSTED_URL}\r\n        isExternal\r\n        endIcon={<ExternalLink />}\r\n      >\r\n        {formatMessage(\r\n          {\r\n            id: 'Settings.application.ee.admin-seats.add-seats',\r\n            defaultMessage:\r\n              '{isHostedOnStrapiCloud, select, true {Add seats} other {Contact sales}}',\r\n          },\r\n          { isHostedOnStrapiCloud }\r\n        )}\r\n      </Link>\r\n    </Grid.Item>\r\n  );\r\n};\r\n"],"names":["useIntl","useSelector","selectAdminPermissions","useRBAC","useLicenseLimits","jsxs","Grid","jsx","Typography","Flex","Tooltip","WarningCircle","Link","ExternalLink"],"mappings":"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"}