{"version":3,"file":"InstalledPlugins-CTsovDYg.js","sources":["../../admin/src/pages/Settings/pages/InstalledPlugins.tsx"],"sourcesContent":["import * as React from 'react';\r\n\r\nimport { Table, Tbody, Td, Th, Thead, Tr, Typography, useNotifyAT } from '@strapi/design-system';\r\nimport { useIntl } from 'react-intl';\r\n\r\nimport { Layouts } from '../../../components/Layouts/Layout';\r\nimport { Page } from '../../../components/PageHelpers';\r\nimport { useTypedSelector } from '../../../core/store/hooks';\r\nimport { useNotification } from '../../../features/Notifications';\r\nimport { useAPIErrorHandler } from '../../../hooks/useAPIErrorHandler';\r\nimport { useGetPluginsQuery } from '../../../services/admin';\r\n\r\nconst InstalledPlugins = () => {\r\n  const { formatMessage } = useIntl();\r\n  const { notifyStatus } = useNotifyAT();\r\n  const { toggleNotification } = useNotification();\r\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler();\r\n\r\n  const { isLoading, data, error } = useGetPluginsQuery();\r\n\r\n  React.useEffect(() => {\r\n    if (data) {\r\n      notifyStatus(\r\n        formatMessage(\r\n          {\r\n            id: 'app.utils.notify.data-loaded',\r\n            defaultMessage: 'The {target} has loaded',\r\n          },\r\n          {\r\n            target: formatMessage({\r\n              id: 'global.plugins',\r\n              defaultMessage: 'Plugins',\r\n            }),\r\n          }\r\n        )\r\n      );\r\n    }\r\n\r\n    if (error) {\r\n      toggleNotification({\r\n        type: 'danger',\r\n        message: formatAPIError(error),\r\n      });\r\n    }\r\n  }, [data, error, formatAPIError, formatMessage, notifyStatus, toggleNotification]);\r\n\r\n  if (isLoading) {\r\n    return <Page.Loading />;\r\n  }\r\n\r\n  return (\r\n    <Layouts.Root>\r\n      <Page.Main>\r\n        <Layouts.Header\r\n          title={formatMessage({\r\n            id: 'global.plugins',\r\n            defaultMessage: 'Plugins',\r\n          })}\r\n          subtitle={formatMessage({\r\n            id: 'app.components.ListPluginsPage.description',\r\n            defaultMessage: 'List of the installed plugins in the project.',\r\n          })}\r\n        />\r\n        <Layouts.Content>\r\n          <Table colCount={2} rowCount={data?.plugins?.length ?? 0 + 1}>\r\n            <Thead>\r\n              <Tr>\r\n                <Th>\r\n                  <Typography variant=\"sigma\" textColor=\"neutral600\">\r\n                    {formatMessage({\r\n                      id: 'global.name',\r\n                      defaultMessage: 'Name',\r\n                    })}\r\n                  </Typography>\r\n                </Th>\r\n                <Th>\r\n                  <Typography variant=\"sigma\" textColor=\"neutral600\">\r\n                    {formatMessage({\r\n                      id: 'global.description',\r\n                      defaultMessage: 'description',\r\n                    })}\r\n                  </Typography>\r\n                </Th>\r\n              </Tr>\r\n            </Thead>\r\n            <Tbody>\r\n              {data?.plugins.map(({ name, displayName, description }) => {\r\n                return (\r\n                  <Tr key={name}>\r\n                    <Td>\r\n                      <Typography textColor=\"neutral800\" variant=\"omega\" fontWeight=\"bold\">\r\n                        {formatMessage({\r\n                          id: `global.plugins.${name}`,\r\n                          defaultMessage: displayName,\r\n                        })}\r\n                      </Typography>\r\n                    </Td>\r\n                    <Td>\r\n                      <Typography textColor=\"neutral800\">\r\n                        {formatMessage({\r\n                          id: `global.plugins.${name}.description`,\r\n                          defaultMessage: description,\r\n                        })}\r\n                      </Typography>\r\n                    </Td>\r\n                  </Tr>\r\n                );\r\n              })}\r\n            </Tbody>\r\n          </Table>\r\n        </Layouts.Content>\r\n      </Page.Main>\r\n    </Layouts.Root>\r\n  );\r\n};\r\n\r\nconst ProtectedInstalledPlugins = () => {\r\n  const { formatMessage } = useIntl();\r\n  const permissions = useTypedSelector((state) => state.admin_app.permissions);\r\n\r\n  return (\r\n    <Page.Protect permissions={permissions.marketplace?.main}>\r\n      <Page.Title>\r\n        {formatMessage({\r\n          id: 'global.plugins',\r\n          defaultMessage: 'Plugins',\r\n        })}\r\n      </Page.Title>\r\n      <InstalledPlugins />\r\n    </Page.Protect>\r\n  );\r\n};\r\n\r\nexport { ProtectedInstalledPlugins, InstalledPlugins };\r\n"],"names":["useIntl","useNotifyAT","useNotification","useAPIErrorHandler","useGetPluginsQuery","React","jsx","Page","Layouts","jsxs","Table","Thead","Tr","Th","Typography","Tbody","Td","useTypedSelector"],"mappings":"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"}