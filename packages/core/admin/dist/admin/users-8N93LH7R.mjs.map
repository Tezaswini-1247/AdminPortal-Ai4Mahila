{"version":3,"file":"users-8N93LH7R.mjs","sources":["../../admin/src/utils/users.ts"],"sourcesContent":["import type { User } from '../features/Auth';\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * getDisplayName\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\n/**\r\n * Retrieves the display name of an admin panel user\r\n */\r\nconst getDisplayName = ({ firstname, lastname, username, email }: Partial<User> = {}): string => {\r\n  if (username) {\r\n    return username;\r\n  }\r\n\r\n  // firstname is not required if the user is created with a username\r\n  if (firstname) {\r\n    return `${firstname} ${lastname ?? ''}`.trim();\r\n  }\r\n\r\n  return email ?? '';\r\n};\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * hashAdminUserEmail\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\nconst hashAdminUserEmail = async (payload?: User) => {\r\n  if (!payload || !payload.email) {\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    return await digestMessage(payload.email);\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n};\r\n\r\nconst bufferToHex = (buffer: ArrayBuffer) => {\r\n  return [...new Uint8Array(buffer)].map((b) => b.toString(16).padStart(2, '0')).join('');\r\n};\r\nconst digestMessage = async (message: string) => {\r\n  const msgUint8 = new TextEncoder().encode(message);\r\n  const hashBuffer = await crypto.subtle.digest('SHA-256', msgUint8);\r\n\r\n  return bufferToHex(hashBuffer);\r\n};\r\n\r\nexport { getDisplayName, hashAdminUserEmail };\r\n"],"names":[],"mappings":"AASM,MAAA,cAAA,GAAiB,CAAC,EAAE,SAAA,EAAW,UAAU,QAAU,EAAA,KAAA,EAAyB,GAAA,EAAe,KAAA;AAC/F,EAAA,IAAI,QAAU,EAAA;AACZ,IAAO,OAAA,QAAA;AAAA;AAIT,EAAA,IAAI,SAAW,EAAA;AACb,IAAA,OAAO,GAAG,SAAS,CAAA,CAAA,EAAI,QAAY,IAAA,EAAE,GAAG,IAAK,EAAA;AAAA;AAG/C,EAAA,OAAO,KAAS,IAAA,EAAA;AAClB;AAMM,MAAA,kBAAA,GAAqB,OAAO,OAAmB,KAAA;AACnD,EAAA,IAAI,CAAC,OAAA,IAAW,CAAC,OAAA,CAAQ,KAAO,EAAA;AAC9B,IAAO,OAAA,IAAA;AAAA;AAGT,EAAI,IAAA;AACF,IAAO,OAAA,MAAM,aAAc,CAAA,OAAA,CAAQ,KAAK,CAAA;AAAA,WACjC,KAAO,EAAA;AACd,IAAO,OAAA,IAAA;AAAA;AAEX;AAEA,MAAM,WAAA,GAAc,CAAC,MAAwB,KAAA;AAC3C,EAAO,OAAA,CAAC,GAAG,IAAI,UAAA,CAAW,MAAM,CAAC,CAAA,CAAE,IAAI,CAAC,CAAA,KAAM,EAAE,QAAS,CAAA,EAAE,EAAE,QAAS,CAAA,CAAA,EAAG,GAAG,CAAC,CAAA,CAAE,KAAK,EAAE,CAAA;AACxF,CAAA;AACA,MAAM,aAAA,GAAgB,OAAO,OAAoB,KAAA;AAC/C,EAAA,MAAM,QAAW,GAAA,IAAI,WAAY,EAAA,CAAE,OAAO,OAAO,CAAA;AACjD,EAAA,MAAM,aAAa,MAAM,MAAA,CAAO,MAAO,CAAA,MAAA,CAAO,WAAW,QAAQ,CAAA;AAEjE,EAAA,OAAO,YAAY,UAAU,CAAA;AAC/B,CAAA;;;;"}