{"version":3,"file":"SelectRoles-CIOWmS2a.js","sources":["../../admin/src/pages/Settings/pages/Users/components/MagicLinkWrapper.tsx","../../admin/src/pages/Settings/pages/Users/components/MagicLinkCE.tsx","../../admin/src/pages/Settings/pages/Users/components/SelectRoles.tsx"],"sourcesContent":["import { IconButton } from '@strapi/design-system';\r\nimport { Duplicate } from '@strapi/icons';\r\nimport { useIntl } from 'react-intl';\r\n\r\nimport { ContentBox } from '../../../../../components/ContentBox';\r\nimport { useNotification } from '../../../../../features/Notifications';\r\nimport { useClipboard } from '../../../../../hooks/useClipboard';\r\n\r\ninterface MagicLinkWrapperProps {\r\n  children: string;\r\n  target: string;\r\n}\r\n\r\nconst MagicLinkWrapper = ({ children, target }: MagicLinkWrapperProps) => {\r\n  const { toggleNotification } = useNotification();\r\n  const { formatMessage } = useIntl();\r\n  const { copy } = useClipboard();\r\n\r\n  const copyLabel = formatMessage({\r\n    id: 'app.component.CopyToClipboard.label',\r\n    defaultMessage: 'Copy to clipboard',\r\n  });\r\n\r\n  const handleClick = async (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault();\r\n\r\n    const didCopy = await copy(target);\r\n\r\n    if (didCopy) {\r\n      toggleNotification({\r\n        type: 'info',\r\n        message: formatMessage({ id: 'notification.link-copied' }),\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ContentBox\r\n      endAction={\r\n        <IconButton label={copyLabel} variant=\"ghost\" onClick={handleClick}>\r\n          <Duplicate />\r\n        </IconButton>\r\n      }\r\n      title={target}\r\n      titleEllipsis\r\n      subtitle={children}\r\n      icon={<span style={{ fontSize: 32 }}>✉️</span>}\r\n      iconBackground=\"neutral100\"\r\n    />\r\n  );\r\n};\r\n\r\nexport { MagicLinkWrapper };\r\nexport type { MagicLinkWrapperProps };\r\n","import { useIntl } from 'react-intl';\r\n\r\nimport { getBasename } from '../../../../../core/utils/basename';\r\n\r\nimport { MagicLinkWrapper } from './MagicLinkWrapper';\r\n\r\ninterface MagicLinkCEProps {\r\n  registrationToken: string;\r\n}\r\n\r\nconst MagicLinkCE = ({ registrationToken }: MagicLinkCEProps) => {\r\n  const { formatMessage } = useIntl();\r\n  const target = `${\r\n    window.location.origin\r\n  }${getBasename()}/auth/register?registrationToken=${registrationToken}`;\r\n\r\n  return (\r\n    <MagicLinkWrapper target={target}>\r\n      {formatMessage({\r\n        id: 'app.components.Users.MagicLink.connect',\r\n        defaultMessage: 'Copy and share this link to give access to this user',\r\n      })}\r\n    </MagicLinkWrapper>\r\n  );\r\n};\r\n\r\nexport { MagicLinkCE };\r\nexport type { MagicLinkCEProps };\r\n","import { Field, MultiSelect, MultiSelectOption } from '@strapi/design-system';\r\nimport { Loader as LoadingIcon } from '@strapi/icons';\r\nimport { useIntl } from 'react-intl';\r\nimport { styled, keyframes } from 'styled-components';\r\n\r\nimport { useField } from '../../../../../components/Form';\r\nimport { useAdminRoles } from '../../../../../hooks/useAdminRoles';\r\n\r\ninterface SelectRolesProps {\r\n  disabled?: boolean;\r\n}\r\n\r\nconst SelectRoles = ({ disabled }: SelectRolesProps) => {\r\n  const { isLoading, roles } = useAdminRoles();\r\n\r\n  const { formatMessage } = useIntl();\r\n  const { value = [], onChange, error } = useField<string[]>('roles');\r\n\r\n  return (\r\n    <Field.Root\r\n      error={error}\r\n      hint={formatMessage({\r\n        id: 'app.components.Users.ModalCreateBody.block-title.roles.description',\r\n        defaultMessage: 'A user can have one or several roles',\r\n      })}\r\n      name=\"roles\"\r\n      required\r\n    >\r\n      <Field.Label>\r\n        {formatMessage({\r\n          id: 'app.components.Users.ModalCreateBody.block-title.roles',\r\n          defaultMessage: \"User's roles\",\r\n        })}\r\n      </Field.Label>\r\n      <MultiSelect\r\n        disabled={disabled}\r\n        onChange={(v) => {\r\n          onChange('roles', v);\r\n        }}\r\n        placeholder={formatMessage({\r\n          id: 'app.components.Select.placeholder',\r\n          defaultMessage: 'Select',\r\n        })}\r\n        startIcon={isLoading ? <Loader /> : undefined}\r\n        value={value.map((v) => v.toString())}\r\n        withTags\r\n      >\r\n        {roles.map((role) => {\r\n          return (\r\n            <MultiSelectOption key={role.id} value={role.id.toString()}>\r\n              {formatMessage({\r\n                id: `global.${role.code}`,\r\n                defaultMessage: role.name,\r\n              })}\r\n            </MultiSelectOption>\r\n          );\r\n        })}\r\n      </MultiSelect>\r\n      <Field.Error />\r\n      <Field.Hint />\r\n    </Field.Root>\r\n  );\r\n};\r\n\r\nconst rotation = keyframes`\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(359deg);\r\n  }\r\n`;\r\n\r\nconst LoadingWrapper = styled.div`\r\n  animation: ${rotation} 2s infinite linear;\r\n`;\r\n\r\nconst Loader = () => (\r\n  <LoadingWrapper>\r\n    <LoadingIcon />\r\n  </LoadingWrapper>\r\n);\r\n\r\nexport { SelectRoles };\r\n"],"names":["useNotification","useIntl","useClipboard","jsx","ContentBox","IconButton","Duplicate","getBasename","useAdminRoles","useField","jsxs","Field","MultiSelect","MultiSelectOption","keyframes","styled","LoadingIcon"],"mappings":"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"}