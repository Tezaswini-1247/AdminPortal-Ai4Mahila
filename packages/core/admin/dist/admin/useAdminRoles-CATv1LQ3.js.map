{"version":3,"file":"useAdminRoles-CATv1LQ3.js","sources":["../../admin/src/hooks/useAdminRoles.ts"],"sourcesContent":["import * as React from 'react';\r\n\r\nimport { useCollator } from '@strapi/design-system';\r\nimport { useIntl } from 'react-intl';\r\n\r\nimport { GetRolesParams, useGetRolesQuery } from '../services/users';\r\n\r\nimport type { FindRoles } from '../../../shared/contracts/roles';\r\n\r\nexport type AdminRole = FindRoles.Response['data'][number];\r\n\r\nexport const useAdminRoles = (\r\n  params: GetRolesParams = {},\r\n  queryOptions?: Parameters<typeof useGetRolesQuery>[1]\r\n) => {\r\n  const { locale } = useIntl();\r\n  const formatter = useCollator(locale, {\r\n    sensitivity: 'base',\r\n  });\r\n\r\n  const { data, error, isError, isLoading, refetch } = useGetRolesQuery(params, queryOptions);\r\n\r\n  // the return value needs to be memoized, because intantiating\r\n  // an empty array as default value would lead to an unstable return\r\n  // value, which later on triggers infinite loops if used in the\r\n  // dependency arrays of other hooks\r\n  const roles = React.useMemo(\r\n    () =>\r\n      [...(data ?? [])].sort((a, b) =>\r\n        formatter.compare(a.name, b.name)\r\n      ) as FindRoles.Response['data'],\r\n    [data, formatter]\r\n  );\r\n\r\n  return {\r\n    roles,\r\n    error,\r\n    isError,\r\n    isLoading,\r\n    refetch,\r\n  };\r\n};\r\n"],"names":["useIntl","useCollator","useGetRolesQuery","React"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAWO,MAAM,aAAgB,GAAA,CAC3B,MAAyB,GAAA,IACzB,YACG,KAAA;AACH,EAAM,MAAA,EAAE,MAAO,EAAA,GAAIA,iBAAQ,EAAA;AAC3B,EAAM,MAAA,SAAA,GAAYC,yBAAY,MAAQ,EAAA;AAAA,IACpC,WAAa,EAAA;AAAA,GACd,CAAA;AAED,EAAM,MAAA,EAAE,MAAM,KAAO,EAAA,OAAA,EAAS,WAAW,OAAQ,EAAA,GAAIC,sBAAiB,CAAA,MAAA,EAAQ,YAAY,CAAA;AAM1F,EAAA,MAAM,QAAQC,gBAAM,CAAA,OAAA;AAAA,IAClB,MACE,CAAC,GAAI,IAAQ,IAAA,EAAG,CAAE,CAAA,IAAA;AAAA,MAAK,CAAC,GAAG,CACzB,KAAA,SAAA,CAAU,QAAQ,CAAE,CAAA,IAAA,EAAM,EAAE,IAAI;AAAA,KAClC;AAAA,IACF,CAAC,MAAM,SAAS;AAAA,GAClB;AAEA,EAAO,OAAA;AAAA,IACL,KAAA;AAAA,IACA,KAAA;AAAA,IACA,OAAA;AAAA,IACA,SAAA;AAAA,IACA;AAAA,GACF;AACF;;;;"}