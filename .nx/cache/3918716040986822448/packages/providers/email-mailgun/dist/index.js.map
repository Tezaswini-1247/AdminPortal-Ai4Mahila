{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import assert from 'node:assert';\r\nimport formData from 'form-data';\r\nimport Mailgun, { type MailgunClientOptions } from 'mailgun.js';\r\n\r\ninterface Settings {\r\n  defaultFrom: string;\r\n  defaultReplyTo: string;\r\n}\r\n\r\ninterface SendOptions {\r\n  from?: string;\r\n  to: string;\r\n  cc: string;\r\n  bcc: string;\r\n  replyTo?: string;\r\n  subject: string;\r\n  text: string;\r\n  html: string;\r\n  [key: string]: unknown;\r\n}\r\n\r\ntype ProviderOptions = MailgunClientOptions & {\r\n  domain: string;\r\n};\r\n\r\nconst DEFAULT_OPTIONS = {\r\n  username: 'api',\r\n};\r\n\r\nexport default {\r\n  init(providerOptions: ProviderOptions, settings: Settings) {\r\n    assert(providerOptions.key, 'Mailgun API key is required');\r\n    assert(providerOptions.domain, 'Mailgun domain is required');\r\n\r\n    const mailgun = new Mailgun(formData);\r\n    const mg = mailgun.client({\r\n      ...DEFAULT_OPTIONS,\r\n      ...providerOptions,\r\n    });\r\n\r\n    return {\r\n      send(options: SendOptions) {\r\n        const { from, to, cc, bcc, replyTo, subject, text, html, ...rest } = options;\r\n\r\n        const data = {\r\n          from: from || settings.defaultFrom,\r\n          to,\r\n          cc,\r\n          bcc,\r\n          'h:Reply-To': replyTo || settings.defaultReplyTo,\r\n          subject,\r\n          text,\r\n          html,\r\n          ...rest,\r\n        };\r\n\r\n        return mg.messages.create(providerOptions.domain as string, data);\r\n      },\r\n    };\r\n  },\r\n};\r\n"],"names":["assert","Mailgun","formData"],"mappings":";;;;;;;;AAyBA,MAAM,kBAAkB;AAAA,EACtB,UAAU;AACZ;AAEA,MAAe,QAAA;AAAA,EACb,KAAK,iBAAkC,UAAoB;AAClDA,4BAAA,gBAAgB,KAAK,6BAA6B;AAClDA,4BAAA,gBAAgB,QAAQ,4BAA4B;AAErD,UAAA,UAAU,IAAIC,iBAAA,QAAQC,yBAAQ;AAC9B,UAAA,KAAK,QAAQ,OAAO;AAAA,MACxB,GAAG;AAAA,MACH,GAAG;AAAA,IAAA,CACJ;AAEM,WAAA;AAAA,MACL,KAAK,SAAsB;AACnB,cAAA,EAAE,MAAM,IAAI,IAAI,KAAK,SAAS,SAAS,MAAM,MAAM,GAAG,KAAS,IAAA;AAErE,cAAM,OAAO;AAAA,UACX,MAAM,QAAQ,SAAS;AAAA,UACvB;AAAA,UACA;AAAA,UACA;AAAA,UACA,cAAc,WAAW,SAAS;AAAA,UAClC;AAAA,UACA;AAAA,UACA;AAAA,UACA,GAAG;AAAA,QACL;AAEA,eAAO,GAAG,SAAS,OAAO,gBAAgB,QAAkB,IAAI;AAAA,MAAA;AAAA,IAEpE;AAAA,EAAA;AAEJ;;"}