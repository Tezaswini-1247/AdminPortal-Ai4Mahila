{"version":3,"file":"i18n.mjs","sources":["../../../../../../src/services/document-service/transform/relations/utils/i18n.ts"],"sourcesContent":["import { UID } from '@strapi/types';\r\nimport { LongHandDocument } from './types';\r\n\r\nexport const isLocalizedContentType = (uid: UID.Schema) => {\r\n  const model = strapi.getModel(uid);\r\n  return strapi.plugin('i18n').service('content-types').isLocalizedContentType(model);\r\n};\r\n\r\nexport const getDefaultLocale = () => {\r\n  return strapi.plugin('i18n').service('locales').getDefaultLocale();\r\n};\r\n\r\nexport const getRelationTargetLocale = (\r\n  relation: LongHandDocument,\r\n  opts: {\r\n    targetUid: UID.Schema;\r\n    sourceUid: UID.Schema;\r\n    sourceLocale?: string | null;\r\n  }\r\n) => {\r\n  const targetLocale = relation.locale || opts.sourceLocale;\r\n\r\n  const isTargetLocalized = isLocalizedContentType(opts.targetUid);\r\n  const isSourceLocalized = isLocalizedContentType(opts.sourceUid);\r\n\r\n  // Both source and target locales should match\r\n  if (isSourceLocalized && isTargetLocalized) {\r\n    return opts.sourceLocale;\r\n  }\r\n\r\n  if (isTargetLocalized) {\r\n    return targetLocale;\r\n  }\r\n\r\n  return null;\r\n};\r\n"],"names":[],"mappings":"AAGa,MAAA,yBAAyB,CAAC,QAAoB;AACnD,QAAA,QAAQ,OAAO,SAAS,GAAG;AAC1B,SAAA,OAAO,OAAO,MAAM,EAAE,QAAQ,eAAe,EAAE,uBAAuB,KAAK;AACpF;AAEO,MAAM,mBAAmB,MAAM;AACpC,SAAO,OAAO,OAAO,MAAM,EAAE,QAAQ,SAAS,EAAE,iBAAiB;AACnE;AAEa,MAAA,0BAA0B,CACrC,UACA,SAKG;AACG,QAAA,eAAe,SAAS,UAAU,KAAK;AAEvC,QAAA,oBAAoB,uBAAuB,KAAK,SAAS;AACzD,QAAA,oBAAoB,uBAAuB,KAAK,SAAS;AAG/D,MAAI,qBAAqB,mBAAmB;AAC1C,WAAO,KAAK;AAAA,EAAA;AAGd,MAAI,mBAAmB;AACd,WAAA;AAAA,EAAA;AAGF,SAAA;AACT;"}