{"version":3,"file":"convert-custom-field-type.js","sources":["../../src/utils/convert-custom-field-type.ts"],"sourcesContent":["import type { Core } from '@strapi/types';\r\n\r\ntype InputAttributes = {\r\n  [key: string]: {\r\n    type: string;\r\n    customField?: string;\r\n  };\r\n};\r\n\r\nexport const convertCustomFieldType = (strapi: Core.Strapi) => {\r\n  const allContentTypeSchemaAttributes = Object.values(strapi.contentTypes).map(\r\n    (schema) => schema.attributes\r\n  );\r\n\r\n  const allComponentSchemaAttributes = Object.values(strapi.components).map(\r\n    (schema) => schema.attributes\r\n  );\r\n  const allSchemasAttributes: InputAttributes[] = [\r\n    ...allContentTypeSchemaAttributes,\r\n    ...allComponentSchemaAttributes,\r\n  ];\r\n\r\n  for (const schemaAttrbutes of allSchemasAttributes) {\r\n    for (const attribute of Object.values(schemaAttrbutes)) {\r\n      if (attribute.type === 'customField') {\r\n        const customField = strapi.get('custom-fields').get(attribute.customField);\r\n        attribute.type = customField.type;\r\n      }\r\n    }\r\n  }\r\n};\r\n"],"names":[],"mappings":";;AASa,MAAA,yBAAyB,CAAC,WAAwB;AAC7D,QAAM,iCAAiC,OAAO,OAAO,OAAO,YAAY,EAAE;AAAA,IACxE,CAAC,WAAW,OAAO;AAAA,EACrB;AAEA,QAAM,+BAA+B,OAAO,OAAO,OAAO,UAAU,EAAE;AAAA,IACpE,CAAC,WAAW,OAAO;AAAA,EACrB;AACA,QAAM,uBAA0C;AAAA,IAC9C,GAAG;AAAA,IACH,GAAG;AAAA,EACL;AAEA,aAAW,mBAAmB,sBAAsB;AAClD,eAAW,aAAa,OAAO,OAAO,eAAe,GAAG;AAClD,UAAA,UAAU,SAAS,eAAe;AACpC,cAAM,cAAc,OAAO,IAAI,eAAe,EAAE,IAAI,UAAU,WAAW;AACzE,kBAAU,OAAO,YAAY;AAAA,MAAA;AAAA,IAC/B;AAAA,EACF;AAEJ;;"}