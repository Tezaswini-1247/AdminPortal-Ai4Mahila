{"version":3,"file":"console.js","sources":["../../../src/cli/commands/console.ts"],"sourcesContent":["import REPL from 'repl';\r\nimport { createCommand } from 'commander';\r\nimport { createStrapi, compileStrapi } from '@strapi/core';\r\n\r\nimport type { StrapiCommand } from '../types';\r\nimport { runAction } from '../utils/helpers';\r\n\r\nconst action = async () => {\r\n  const appContext = await compileStrapi();\r\n  const app = await createStrapi(appContext).load();\r\n\r\n  app.start().then(() => {\r\n    const repl = REPL.start(app.config.info.name + ' > ' || 'strapi > '); // eslint-disable-line prefer-template\r\n\r\n    repl.on('exit', (err: Error) => {\r\n      if (err) {\r\n        app.log.error(err);\r\n        process.exit(1);\r\n      }\r\n\r\n      app.server.destroy();\r\n      process.exit(0);\r\n    });\r\n  });\r\n};\r\n\r\n/**\r\n * `$ strapi console`\r\n */\r\nconst command: StrapiCommand = () => {\r\n  return createCommand('console')\r\n    .description('Open the Strapi framework console')\r\n    .action(runAction('console', action));\r\n};\r\n\r\nexport { action, command };\r\n"],"names":["compileStrapi","createStrapi","REPL","createCommand","runAction"],"mappings":";;;;;;;;AAOA,MAAM,SAAS,YAAY;AACnB,QAAA,aAAa,MAAMA,mBAAc;AACvC,QAAM,MAAM,MAAMC,KAAAA,aAAa,UAAU,EAAE,KAAK;AAE5C,MAAA,QAAQ,KAAK,MAAM;AACf,UAAA,OAAOC,sBAAK,MAAM,IAAI,OAAO,KAAK,OAAO,SAAS,WAAW;AAE9D,SAAA,GAAG,QAAQ,CAAC,QAAe;AAC9B,UAAI,KAAK;AACH,YAAA,IAAI,MAAM,GAAG;AACjB,gBAAQ,KAAK,CAAC;AAAA,MAAA;AAGhB,UAAI,OAAO,QAAQ;AACnB,cAAQ,KAAK,CAAC;AAAA,IAAA,CACf;AAAA,EAAA,CACF;AACH;AAKA,MAAM,UAAyB,MAAM;AAC5B,SAAAC,UAAA,cAAc,SAAS,EAC3B,YAAY,mCAAmC,EAC/C,OAAOC,QAAA,UAAU,WAAW,MAAM,CAAC;AACxC;;;"}