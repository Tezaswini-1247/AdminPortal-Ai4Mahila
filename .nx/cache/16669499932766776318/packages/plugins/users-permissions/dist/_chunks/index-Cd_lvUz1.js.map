{"version":3,"file":"index-Cd_lvUz1.js","sources":["../../admin/src/pages/EmailTemplates/utils/schema.js","../../admin/src/pages/EmailTemplates/components/EmailForm.jsx","../../admin/src/pages/EmailTemplates/components/EmailTable.jsx","../../admin/src/pages/EmailTemplates/index.jsx"],"sourcesContent":["import { translatedErrors } from '@strapi/strapi/admin';\nimport * as yup from 'yup';\n\nconst schema = yup.object().shape({\n  options: yup\n    .object()\n    .shape({\n      from: yup\n        .object()\n        .shape({\n          name: yup.string().required({\n            id: translatedErrors.required.id,\n            defaultMessage: 'This field is required',\n          }),\n          email: yup.string().email(translatedErrors.email).required({\n            id: translatedErrors.required.id,\n            defaultMessage: 'This field is required',\n          }),\n        })\n        .required(),\n      response_email: yup.string().email(translatedErrors.email),\n      object: yup.string().required({\n        id: translatedErrors.required.id,\n        defaultMessage: 'This field is required',\n      }),\n      message: yup.string().required({\n        id: translatedErrors.required.id,\n        defaultMessage: 'This field is required',\n      }),\n    })\n    .required(translatedErrors.required.id),\n});\n\nexport default schema;\n","import React from 'react';\r\n\r\nimport { Button, Grid, Modal, Breadcrumbs, Crumb, VisuallyHidden } from '@strapi/design-system';\r\nimport { Form, InputRenderer } from '@strapi/strapi/admin';\r\nimport PropTypes from 'prop-types';\r\nimport { useIntl } from 'react-intl';\r\n\r\nimport { getTrad } from '../../../utils';\r\nimport schema from '../utils/schema';\r\n\r\nconst EmailForm = ({ template = {}, onToggle, open, onSubmit }) => {\r\n  const { formatMessage } = useIntl();\r\n\r\n  return (\r\n    <Modal.Root open={open} onOpenChange={onToggle}>\r\n      <Modal.Content>\r\n        <Modal.Header>\r\n          <Breadcrumbs\r\n            label={`${formatMessage({\r\n              id: getTrad('PopUpForm.header.edit.email-templates'),\r\n              defaultMessage: 'Edit email template',\r\n            })}, ${\r\n              template.display\r\n                ? formatMessage({\r\n                    id: getTrad(template.display),\r\n                    defaultMessage: template.display,\r\n                  })\r\n                : ''\r\n            }`}\r\n          >\r\n            <Crumb>\r\n              {formatMessage({\r\n                id: getTrad('PopUpForm.header.edit.email-templates'),\r\n                defaultMessage: 'Edit email template',\r\n              })}\r\n            </Crumb>\r\n            <Crumb isCurrent>\r\n              {template.display\r\n                ? formatMessage({ id: getTrad(template.display), defaultMessage: template.display })\r\n                : ''}\r\n            </Crumb>\r\n          </Breadcrumbs>\r\n          <VisuallyHidden>\r\n            <Modal.Title>\r\n              {`${formatMessage({\r\n                id: getTrad('PopUpForm.header.edit.email-templates'),\r\n                defaultMessage: 'Edit email template',\r\n              })}, ${template.display ? formatMessage({ id: getTrad(template.display), defaultMessage: template.display }) : ''}`}\r\n            </Modal.Title>\r\n          </VisuallyHidden>\r\n        </Modal.Header>\r\n        <Form onSubmit={onSubmit} initialValues={template} validationSchema={schema}>\r\n          {({ isSubmitting }) => {\r\n            return (\r\n              <>\r\n                <Modal.Body>\r\n                  <Grid.Root gap={5}>\r\n                    {[\r\n                      {\r\n                        label: formatMessage({\r\n                          id: getTrad('PopUpForm.Email.options.from.name.label'),\r\n                          defaultMessage: 'Shipper name',\r\n                        }),\r\n                        name: 'options.from.name',\r\n                        size: 6,\r\n                        type: 'string',\r\n                      },\r\n                      {\r\n                        label: formatMessage({\r\n                          id: getTrad('PopUpForm.Email.options.from.email.label'),\r\n                          defaultMessage: 'Shipper email',\r\n                        }),\r\n                        name: 'options.from.email',\r\n                        size: 6,\r\n                        type: 'string',\r\n                      },\r\n                      {\r\n                        label: formatMessage({\r\n                          id: getTrad('PopUpForm.Email.options.response_email.label'),\r\n                          defaultMessage: 'Response email',\r\n                        }),\r\n                        name: 'options.response_email',\r\n                        size: 6,\r\n                        type: 'string',\r\n                      },\r\n                      {\r\n                        label: formatMessage({\r\n                          id: getTrad('PopUpForm.Email.options.object.label'),\r\n                          defaultMessage: 'Subject',\r\n                        }),\r\n                        name: 'options.object',\r\n                        size: 6,\r\n                        type: 'string',\r\n                      },\r\n                      {\r\n                        label: formatMessage({\r\n                          id: getTrad('PopUpForm.Email.options.message.label'),\r\n                          defaultMessage: 'Message',\r\n                        }),\r\n                        name: 'options.message',\r\n                        size: 12,\r\n                        type: 'text',\r\n                      },\r\n                    ].map(({ size, ...field }) => (\r\n                      <Grid.Item\r\n                        key={field.name}\r\n                        col={size}\r\n                        direction=\"column\"\r\n                        alignItems=\"stretch\"\r\n                      >\r\n                        <InputRenderer {...field} />\r\n                      </Grid.Item>\r\n                    ))}\r\n                  </Grid.Root>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                  <Modal.Close>\r\n                    <Button variant=\"tertiary\">Cancel</Button>\r\n                  </Modal.Close>\r\n                  <Button loading={isSubmitting} type=\"submit\">\r\n                    Finish\r\n                  </Button>\r\n                </Modal.Footer>\r\n              </>\r\n            );\r\n          }}\r\n        </Form>\r\n      </Modal.Content>\r\n    </Modal.Root>\r\n  );\r\n};\r\n\r\nEmailForm.defaultProps = {\r\n  template: {},\r\n};\r\n\r\nEmailForm.propTypes = {\r\n  template: PropTypes.shape({\r\n    display: PropTypes.string,\r\n    icon: PropTypes.string,\r\n    options: PropTypes.shape({\r\n      from: PropTypes.shape({\r\n        name: PropTypes.string,\r\n        email: PropTypes.string,\r\n      }),\r\n      message: PropTypes.string,\r\n      object: PropTypes.string,\r\n      response_email: PropTypes.string,\r\n    }),\r\n  }),\r\n  open: PropTypes.bool.isRequired,\r\n  onSubmit: PropTypes.func.isRequired,\r\n  onToggle: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default EmailForm;\r\n","import React from 'react';\r\n\r\nimport {\r\n  IconButton,\r\n  Table,\r\n  Tbody,\r\n  Td,\r\n  Th,\r\n  Thead,\r\n  Tr,\r\n  Typography,\r\n  VisuallyHidden,\r\n  Box,\r\n} from '@strapi/design-system';\r\nimport { Check, Pencil, ArrowClockwise as Refresh } from '@strapi/icons';\r\nimport PropTypes from 'prop-types';\r\nimport { useIntl } from 'react-intl';\r\n\r\nimport { getTrad } from '../../../utils';\r\n\r\nconst EmailTable = ({ canUpdate, onEditClick }) => {\r\n  const { formatMessage } = useIntl();\r\n\r\n  return (\r\n    <Table colCount={3} rowCount={3}>\r\n      <Thead>\r\n        <Tr>\r\n          <Th width=\"1%\">\r\n            <VisuallyHidden>\r\n              {formatMessage({\r\n                id: getTrad('Email.template.table.icon.label'),\r\n                defaultMessage: 'icon',\r\n              })}\r\n            </VisuallyHidden>\r\n          </Th>\r\n          <Th>\r\n            <Typography variant=\"sigma\" textColor=\"neutral600\">\r\n              {formatMessage({\r\n                id: getTrad('Email.template.table.name.label'),\r\n                defaultMessage: 'name',\r\n              })}\r\n            </Typography>\r\n          </Th>\r\n          <Th width=\"1%\">\r\n            <VisuallyHidden>\r\n              {formatMessage({\r\n                id: getTrad('Email.template.table.action.label'),\r\n                defaultMessage: 'action',\r\n              })}\r\n            </VisuallyHidden>\r\n          </Th>\r\n        </Tr>\r\n      </Thead>\r\n      <Tbody>\r\n        <Tr onClick={() => onEditClick('reset_password')}>\r\n          <Td>\r\n            <Box width=\"3.2rem\" height=\"3.2rem\" padding=\"0.8rem\">\r\n              <Refresh\r\n                aria-label={formatMessage({\r\n                  id: 'global.reset-password',\r\n                  defaultMessage: 'Reset password',\r\n                })}\r\n              />\r\n            </Box>\r\n          </Td>\r\n          <Td>\r\n            <Typography>\r\n              {formatMessage({\r\n                id: 'global.reset-password',\r\n                defaultMessage: 'Reset password',\r\n              })}\r\n            </Typography>\r\n          </Td>\r\n          <Td onClick={(e) => e.stopPropagation()}>\r\n            <IconButton\r\n              onClick={() => onEditClick('reset_password')}\r\n              label={formatMessage({\r\n                id: getTrad('Email.template.form.edit.label'),\r\n                defaultMessage: 'Edit a template',\r\n              })}\r\n              variant=\"ghost\"\r\n              disabled={!canUpdate}\r\n            >\r\n              <Pencil />\r\n            </IconButton>\r\n          </Td>\r\n        </Tr>\r\n        <Tr onClick={() => onEditClick('email_confirmation')}>\r\n          <Td>\r\n            <Box width=\"3.2rem\" height=\"3.2rem\" padding=\"0.8rem\">\r\n              <Check\r\n                aria-label={formatMessage({\r\n                  id: getTrad('Email.template.email_confirmation'),\r\n                  defaultMessage: 'Email address confirmation',\r\n                })}\r\n              />\r\n            </Box>\r\n          </Td>\r\n          <Td>\r\n            <Typography>\r\n              {formatMessage({\r\n                id: getTrad('Email.template.email_confirmation'),\r\n                defaultMessage: 'Email address confirmation',\r\n              })}\r\n            </Typography>\r\n          </Td>\r\n          <Td onClick={(e) => e.stopPropagation()}>\r\n            <IconButton\r\n              onClick={() => onEditClick('email_confirmation')}\r\n              label={formatMessage({\r\n                id: getTrad('Email.template.form.edit.label'),\r\n                defaultMessage: 'Edit a template',\r\n              })}\r\n              variant=\"ghost\"\r\n              disabled={!canUpdate}\r\n            >\r\n              <Pencil />\r\n            </IconButton>\r\n          </Td>\r\n        </Tr>\r\n      </Tbody>\r\n    </Table>\r\n  );\r\n};\r\n\r\nEmailTable.propTypes = {\r\n  canUpdate: PropTypes.bool.isRequired,\r\n  onEditClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default EmailTable;\r\n","import * as React from 'react';\r\n\r\nimport { useTracking } from '@strapi/admin/strapi-admin';\r\nimport { useNotifyAT } from '@strapi/design-system';\r\nimport {\r\n  Page,\r\n  useAPIErrorHandler,\r\n  useNotification,\r\n  useFetchClient,\r\n  useRBAC,\r\n  Layouts,\r\n} from '@strapi/strapi/admin';\r\nimport { useIntl } from 'react-intl';\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\r\n\r\nimport { PERMISSIONS } from '../../constants';\r\nimport { getTrad } from '../../utils';\r\n\r\nimport EmailForm from './components/EmailForm';\r\nimport EmailTable from './components/EmailTable';\r\n\r\nconst ProtectedEmailTemplatesPage = () => (\r\n  <Page.Protect permissions={PERMISSIONS.readEmailTemplates}>\r\n    <EmailTemplatesPage />\r\n  </Page.Protect>\r\n);\r\nconst EmailTemplatesPage = () => {\r\n  const { formatMessage } = useIntl();\r\n  const { trackUsage } = useTracking();\r\n  const { notifyStatus } = useNotifyAT();\r\n  const { toggleNotification } = useNotification();\r\n  const queryClient = useQueryClient();\r\n  const { get, put } = useFetchClient();\r\n  const { formatAPIError } = useAPIErrorHandler();\r\n\r\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\r\n  const [templateToEdit, setTemplateToEdit] = React.useState(null);\r\n\r\n  const {\r\n    isLoading: isLoadingForPermissions,\r\n    allowedActions: { canUpdate },\r\n  } = useRBAC({ update: PERMISSIONS.updateEmailTemplates });\r\n\r\n  const { isLoading: isLoadingData, data } = useQuery(\r\n    ['users-permissions', 'email-templates'],\r\n    async () => {\r\n      const { data } = await get('/users-permissions/email-templates');\r\n\r\n      return data;\r\n    },\r\n    {\r\n      onSuccess() {\r\n        notifyStatus(\r\n          formatMessage({\r\n            id: getTrad('Email.template.data.loaded'),\r\n            defaultMessage: 'Email templates has been loaded',\r\n          })\r\n        );\r\n      },\r\n      onError(error) {\r\n        toggleNotification({\r\n          type: 'danger',\r\n          message: formatAPIError(error),\r\n        });\r\n      },\r\n    }\r\n  );\r\n\r\n  const isLoading = isLoadingForPermissions || isLoadingData;\r\n\r\n  const handleToggle = () => {\r\n    setIsModalOpen((prev) => !prev);\r\n  };\r\n\r\n  const handleEditClick = (template) => {\r\n    setTemplateToEdit(template);\r\n    handleToggle();\r\n  };\r\n\r\n  const submitMutation = useMutation(\r\n    (body) => put('/users-permissions/email-templates', { 'email-templates': body }),\r\n    {\r\n      async onSuccess() {\r\n        await queryClient.invalidateQueries(['users-permissions', 'email-templates']);\r\n\r\n        toggleNotification({\r\n          type: 'success',\r\n          message: formatMessage({ id: 'notification.success.saved', defaultMessage: 'Saved' }),\r\n        });\r\n\r\n        trackUsage('didEditEmailTemplates');\r\n\r\n        handleToggle();\r\n      },\r\n      onError(error) {\r\n        toggleNotification({\r\n          type: 'danger',\r\n          message: formatAPIError(error),\r\n        });\r\n      },\r\n      refetchActive: true,\r\n    }\r\n  );\r\n\r\n  const handleSubmit = (body) => {\r\n    trackUsage('willEditEmailTemplates');\r\n\r\n    const editedTemplates = { ...data, [templateToEdit]: body };\r\n    submitMutation.mutate(editedTemplates);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <Page.Loading />;\r\n  }\r\n\r\n  return (\r\n    <Page.Main aria-busy={submitMutation.isLoading}>\r\n      <Page.Title>\r\n        {formatMessage(\r\n          { id: 'Settings.PageTitle', defaultMessage: 'Settings - {name}' },\r\n          {\r\n            name: formatMessage({\r\n              id: getTrad('HeaderNav.link.emailTemplates'),\r\n              defaultMessage: 'Email templates',\r\n            }),\r\n          }\r\n        )}\r\n      </Page.Title>\r\n      <Layouts.Header\r\n        title={formatMessage({\r\n          id: getTrad('HeaderNav.link.emailTemplates'),\r\n          defaultMessage: 'Email templates',\r\n        })}\r\n      />\r\n      <Layouts.Content>\r\n        <EmailTable onEditClick={handleEditClick} canUpdate={canUpdate} />\r\n        <EmailForm\r\n          template={data[templateToEdit]}\r\n          onToggle={handleToggle}\r\n          open={isModalOpen}\r\n          onSubmit={handleSubmit}\r\n        />\r\n      </Layouts.Content>\r\n    </Page.Main>\r\n  );\r\n};\r\n\r\nexport { ProtectedEmailTemplatesPage, EmailTemplatesPage };\r\n"],"names":["yup","translatedErrors","useIntl","jsx","Modal","jsxs","Breadcrumbs","getTrad","Crumb","VisuallyHidden","Form","Fragment","Grid","InputRenderer","Button","PropTypes","Table","Thead","Tr","Th","Typography","Tbody","Td","Box","Refresh","IconButton","Pencil","Check","Page","PERMISSIONS","useTracking","useNotifyAT","useNotification","useQueryClient","useFetchClient","useAPIErrorHandler","React","useRBAC","useQuery","data","useMutation","Layouts"],"mappings":"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"}