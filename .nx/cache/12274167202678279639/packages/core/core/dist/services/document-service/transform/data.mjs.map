{"version":3,"file":"data.mjs","sources":["../../../../src/services/document-service/transform/data.ts"],"sourcesContent":["import { createIdMap } from './id-map';\r\nimport { extractDataIds as extractDataRelationIds } from './relations/extract/data-ids';\r\nimport { transformDataIdsVisitor as transformRelationDataIds } from './relations/transform/data-ids';\r\nimport { setDefaultLocaleToRelations } from './relations/transform/default-locale';\r\n\r\n/**\r\n * Transforms input data, containing relation document ids, to entity ids.\r\n */\r\nexport const transformData = async (data: any, opts: any) => {\r\n  const idMap = createIdMap({ strapi });\r\n\r\n  // Assign default locales\r\n  const transformedData = await setDefaultLocaleToRelations(data, opts.uid);\r\n\r\n  // Extract any relation ids from the input\r\n  await extractDataRelationIds(idMap, transformedData, opts);\r\n\r\n  // Load any relation the extract methods found\r\n  await idMap.load();\r\n\r\n  // Transform any relation ids to entity ids\r\n  return transformRelationDataIds(idMap, transformedData, opts);\r\n};\r\n"],"names":["extractDataRelationIds","transformRelationDataIds"],"mappings":";;;;AAQa,MAAA,gBAAgB,OAAO,MAAW,SAAc;AAC3D,QAAM,QAAQ,YAAY,EAAE,QAAQ;AAGpC,QAAM,kBAAkB,MAAM,4BAA4B,MAAM,KAAK,GAAG;AAGlE,QAAAA,eAAuB,OAAO,iBAAiB,IAAI;AAGzD,QAAM,MAAM,KAAK;AAGV,SAAAC,wBAAyB,OAAO,iBAAiB,IAAI;AAC9D;"}