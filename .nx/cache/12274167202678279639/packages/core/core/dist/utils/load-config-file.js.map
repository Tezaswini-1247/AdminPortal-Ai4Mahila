{"version":3,"file":"load-config-file.js","sources":["../../src/utils/load-config-file.ts"],"sourcesContent":["import path from 'path';\r\nimport fs from 'fs';\r\nimport { env, importDefault } from '@strapi/utils';\r\n\r\nconst loadJsFile = (file: string) => {\r\n  try {\r\n    const jsModule = importDefault(file);\r\n\r\n    // call if function\r\n    if (typeof jsModule === 'function') {\r\n      return jsModule({ env });\r\n    }\r\n\r\n    return jsModule;\r\n  } catch (error) {\r\n    if (error instanceof Error) {\r\n      throw new Error(`Could not load js config file ${file}: ${error.message}`);\r\n    }\r\n\r\n    throw new Error('Unknown error');\r\n  }\r\n};\r\n\r\nconst loadJSONFile = (file: string) => {\r\n  try {\r\n    return JSON.parse(fs.readFileSync(file).toString());\r\n  } catch (error) {\r\n    if (error instanceof Error) {\r\n      throw new Error(`Could not load json config file ${file}: ${error.message}`);\r\n    }\r\n\r\n    throw new Error('Unknown error');\r\n  }\r\n};\r\n\r\nexport const loadConfigFile = (file: string) => {\r\n  const ext = path.extname(file);\r\n\r\n  switch (ext) {\r\n    case '.js':\r\n      return loadJsFile(file);\r\n    case '.json':\r\n      return loadJSONFile(file);\r\n    default:\r\n      return {};\r\n  }\r\n};\r\n"],"names":["importDefault","env","fs","path"],"mappings":";;;;;;;;AAIA,MAAM,aAAa,CAAC,SAAiB;AAC/B,MAAA;AACI,UAAA,WAAWA,0BAAc,IAAI;AAG/B,QAAA,OAAO,aAAa,YAAY;AAC3B,aAAA,SAAS,EAAEC,KAAAA,YAAAA,KAAK;AAAA,IAAA;AAGlB,WAAA;AAAA,WACA,OAAO;AACd,QAAI,iBAAiB,OAAO;AAC1B,YAAM,IAAI,MAAM,iCAAiC,IAAI,KAAK,MAAM,OAAO,EAAE;AAAA,IAAA;AAGrE,UAAA,IAAI,MAAM,eAAe;AAAA,EAAA;AAEnC;AAEA,MAAM,eAAe,CAAC,SAAiB;AACjC,MAAA;AACF,WAAO,KAAK,MAAMC,YAAA,QAAG,aAAa,IAAI,EAAE,UAAU;AAAA,WAC3C,OAAO;AACd,QAAI,iBAAiB,OAAO;AAC1B,YAAM,IAAI,MAAM,mCAAmC,IAAI,KAAK,MAAM,OAAO,EAAE;AAAA,IAAA;AAGvE,UAAA,IAAI,MAAM,eAAe;AAAA,EAAA;AAEnC;AAEa,MAAA,iBAAiB,CAAC,SAAiB;AACxC,QAAA,MAAMC,cAAAA,QAAK,QAAQ,IAAI;AAE7B,UAAQ,KAAK;AAAA,IACX,KAAK;AACH,aAAO,WAAW,IAAI;AAAA,IACxB,KAAK;AACH,aAAO,aAAa,IAAI;AAAA,IAC1B;AACE,aAAO,CAAC;AAAA,EAAA;AAEd;;"}