{"version":3,"file":"is-initialized.mjs","sources":["../../src/utils/is-initialized.ts"],"sourcesContent":["import { isEmpty, isNil } from 'lodash/fp';\r\n\r\nimport type { Core } from '@strapi/types';\r\n\r\n/**\r\n * Test if the strapi application is considered as initialized (1st user has been created)\r\n */\r\nexport const isInitialized = async (strapi: Core.Strapi): Promise<boolean> => {\r\n  try {\r\n    if (isEmpty(strapi.admin)) {\r\n      return true;\r\n    }\r\n\r\n    // test if there is at least one admin\r\n    const anyAdministrator = await strapi.db.query('admin::user').findOne({ select: ['id'] });\r\n\r\n    return !isNil(anyAdministrator);\r\n  } catch (err) {\r\n    strapi.stopWithError(err);\r\n  }\r\n};\r\n"],"names":[],"mappings":";AAOa,MAAA,gBAAgB,OAAO,WAA0C;AACxE,MAAA;AACE,QAAA,QAAQ,OAAO,KAAK,GAAG;AAClB,aAAA;AAAA,IAAA;AAIT,UAAM,mBAAmB,MAAM,OAAO,GAAG,MAAM,aAAa,EAAE,QAAQ,EAAE,QAAQ,CAAC,IAAI,GAAG;AAEjF,WAAA,CAAC,MAAM,gBAAgB;AAAA,WACvB,KAAK;AACZ,WAAO,cAAc,GAAG;AAAA,EAAA;AAE5B;"}