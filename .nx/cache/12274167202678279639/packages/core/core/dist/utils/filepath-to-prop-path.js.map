{"version":3,"file":"filepath-to-prop-path.js","sources":["../../src/utils/filepath-to-prop-path.ts"],"sourcesContent":["import path from 'node:path';\r\nimport fp from 'lodash/fp';\r\n\r\n/**\r\n * Returns a path (as an array) from a file path\r\n */\r\nexport const filePathToPropPath = (\r\n  entryPath: string,\r\n  useFileNameAsKey: boolean = true\r\n): string[] => {\r\n  const transform = fp.pipe(\r\n    // Remove the relative path prefixes: './' for posix (and some win32) and \".\\\" for win32\r\n    removeRelativePrefix,\r\n    // Remove the path metadata and extensions\r\n    fp.replace(/(\\.settings|\\.json|\\.js)/g, ''),\r\n    // Transform to lowercase\r\n    // Note: We're using fp.toLower instead of fp.lowercase as the latest removes special characters such as \"/\"\r\n    fp.toLower,\r\n    // Split the cleaned path by matching every possible separator (either \"/\" or \"\\\" depending on the OS)\r\n    fp.split(new RegExp(`[\\\\${path.win32.sep}|${path.posix.sep}]`, 'g')),\r\n    // Make sure to remove leading '.' from the different path parts\r\n    fp.map(fp.trimCharsStart('.')),\r\n    // join + split in case some '.' characters are still present in different parts of the path\r\n    fp.join('.'),\r\n    fp.split('.'),\r\n    // Remove the last portion of the path array if the file name shouldn't be used as a key\r\n    useFileNameAsKey ? fp.identity : fp.slice(0, -1)\r\n  );\r\n\r\n  return transform(entryPath) as string[];\r\n};\r\n\r\nconst removeRelativePrefix = (filePath: string) => {\r\n  return filePath.startsWith(`.${path.win32.sep}`) || filePath.startsWith(`.${path.posix.sep}`)\r\n    ? filePath.slice(2)\r\n    : filePath;\r\n};\r\n"],"names":["fp","path"],"mappings":";;;;;;;AAMO,MAAM,qBAAqB,CAChC,WACA,mBAA4B,SACf;AACb,QAAM,YAAYA,YAAAA,QAAG;AAAA;AAAA,IAEnB;AAAA;AAAA,IAEAA,oBAAG,QAAQ,6BAA6B,EAAE;AAAA;AAAA;AAAA,IAG1CA,YAAAA,QAAG;AAAA;AAAA,IAEHA,YAAG,QAAA,MAAM,IAAI,OAAO,MAAMC,cAAK,QAAA,MAAM,GAAG,IAAIA,cAAK,QAAA,MAAM,GAAG,KAAK,GAAG,CAAC;AAAA;AAAA,IAEnED,YAAAA,QAAG,IAAIA,YAAAA,QAAG,eAAe,GAAG,CAAC;AAAA;AAAA,IAE7BA,YAAA,QAAG,KAAK,GAAG;AAAA,IACXA,YAAA,QAAG,MAAM,GAAG;AAAA;AAAA,IAEZ,mBAAmBA,YAAG,QAAA,WAAWA,YAAG,QAAA,MAAM,GAAG,EAAE;AAAA,EACjD;AAEA,SAAO,UAAU,SAAS;AAC5B;AAEA,MAAM,uBAAuB,CAAC,aAAqB;AACjD,SAAO,SAAS,WAAW,IAAIC,cAAAA,QAAK,MAAM,GAAG,EAAE,KAAK,SAAS,WAAW,IAAIA,cAAAA,QAAK,MAAM,GAAG,EAAE,IACxF,SAAS,MAAM,CAAC,IAChB;AACN;;"}