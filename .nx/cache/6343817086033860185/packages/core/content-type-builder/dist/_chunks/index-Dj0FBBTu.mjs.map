{"version":3,"file":"index-Dj0FBBTu.mjs","sources":["../../admin/src/constants.ts","../../admin/src/pluginId.ts","../../admin/src/utils/getRelationType.ts","../../admin/src/utils/makeUnique.ts","../../admin/src/components/DataManagerProvider/constants.ts","../../admin/src/components/DataManagerProvider/utils/retrieveComponentsFromSchema.ts","../../admin/src/components/DataManagerProvider/reducer.ts","../../admin/src/utils/nameToSlug.ts","../../admin/src/components/FormModal/constants.ts","../../admin/src/components/FormModal/utils/createUid.ts","../../admin/src/components/FormModal/utils/customFieldDefaultOptionsReducer.ts","../../admin/src/components/FormModal/utils/relations.ts","../../admin/src/components/FormModal/reducer.ts","../../admin/src/reducers.ts","../../admin/src/utils/formAPI.ts","../../admin/src/utils/prefixPluginTranslations.ts","../../admin/src/components/AutoReloadOverlayBlocker.tsx","../../admin/src/index.ts"],"sourcesContent":["export const PERMISSIONS = {\r\n  // This permission regards the main component (App) and is used to tell\r\n  // If the plugin link should be displayed in the menu\r\n  // And also if the plugin is accessible. This use case is found when a user types the url of the\r\n  // plugin directly in the browser\r\n  main: [{ action: 'plugin::content-type-builder.read', subject: null }],\r\n};\r\n\r\nexport const MAX_COMPONENT_DEPTH = 6;\r\n","import pluginPkg from '../../package.json';\r\n\r\nexport const pluginId = pluginPkg.name.replace(/^@strapi\\//i, '');\r\n","import type { Schema } from '@strapi/types';\r\n\r\n/**\r\n *\r\n * Retrieves the relation type\r\n */\r\nexport const getRelationType = (\r\n  relation: Schema.Attribute.RelationKind.WithTarget | undefined,\r\n  targetAttribute?: string | null\r\n) => {\r\n  const hasNotTargetAttribute = targetAttribute === undefined || targetAttribute === null;\r\n\r\n  if (relation === 'oneToOne' && hasNotTargetAttribute) {\r\n    return 'oneWay';\r\n  }\r\n\r\n  if (relation === 'oneToMany' && hasNotTargetAttribute) {\r\n    return 'manyWay';\r\n  }\r\n\r\n  return relation;\r\n};\r\n","const makeUnique = <T extends string>(array: T[]): T[] => [...new Set(array)];\r\n\r\nexport { makeUnique };\r\n","export const ADD_ATTRIBUTE = 'ContentTypeBuilder/DataManagerProvider/ADD_ATTRIBUTE';\r\nexport const ADD_CUSTOM_FIELD_ATTRIBUTE =\r\n  'ContentTypeBuilder/DataManagerProvider/ADD_CUSTOM_FIELD_ATTRIBUTE';\r\nexport const ADD_CREATED_COMPONENT_TO_DYNAMIC_ZONE =\r\n  'ContentTypeBuilder/DataManagerProvider/ADD_CREATED_COMPONENT_TO_DYNAMIC_ZONE';\r\nexport const CHANGE_DYNAMIC_ZONE_COMPONENTS =\r\n  'ContentTypeBuilder/DataManagerProvider/CHANGE_DYNAMIC_ZONE_COMPONENTS';\r\nexport const CREATE_SCHEMA = 'ContentTypeBuilder/DataManagerProvider/CREATE_SCHEMA';\r\nexport const CREATE_COMPONENT_SCHEMA =\r\n  'ContentTypeBuilder/DataManagerProvider/CREATE_COMPONENT_SCHEMA';\r\nexport const DELETE_NOT_SAVED_TYPE = 'ContentTypeBuilder/DataManagerProvider/DELETE_NOT_SAVED_TYPE';\r\nexport const EDIT_ATTRIBUTE = 'ContentTypeBuilder/DataManagerProvider/EDIT_ATTRIBUTE';\r\nexport const EDIT_CUSTOM_FIELD_ATTRIBUTE =\r\n  'ContentTypeBuilder/DataManagerProvider/EDIT_CUSTOM_FIELD_ATTRIBUTE';\r\nexport const GET_DATA_SUCCEEDED = 'ContentTypeBuilder/DataManagerProvider/GET_DATA_SUCCEEDED';\r\nexport const RELOAD_PLUGIN = 'ContentTypeBuilder/DataManagerProvider/RELOAD_PLUGIN';\r\nexport const REMOVE_FIELD_FROM_DISPLAYED_COMPONENT =\r\n  'ContentTypeBuilder/DataManagerProvider/REMOVE_FIELD_FROM_DISPLAYED_COMPONENT';\r\nexport const REMOVE_COMPONENT_FROM_DYNAMIC_ZONE =\r\n  'ContentTypeBuilder/DataManagerProvider/REMOVE_COMPONENT_FROM_DYNAMIC_ZONE';\r\nexport const REMOVE_FIELD = 'ContentTypeBuilder/DataManagerProvider/REMOVE_FIELD';\r\nexport const SET_MODIFIED_DATA = 'ContentTypeBuilder/DataManagerProvider/SET_MODIFIED_DATA';\r\nexport const UPDATE_SCHEMA = 'ContentTypeBuilder/DataManagerProvider/UPDATE_SCHEMA';\r\nexport const UPDATE_INITIAL_STATE = 'ContentTypeBuilder/DataManagerProvider/UPDATE_INITIAL_STATE';\r\n","import get from 'lodash/get';\r\n\r\nimport { makeUnique } from '../../../utils/makeUnique';\r\n\r\nimport type { AttributeType, Components } from '../../../types';\r\nimport type { Internal } from '@strapi/types';\r\n\r\nconst retrieveComponentsFromSchema = (\r\n  attributes: AttributeType[],\r\n  allComponentsData: Components\r\n): Internal.UID.Component[] => {\r\n  const allComponents: Internal.UID.Component[] = attributes.reduce((acc: any, current) => {\r\n    const type = current.type;\r\n    if (type === 'component') {\r\n      const currentComponentName = current.component;\r\n      // Push the existing compo\r\n      acc.push(currentComponentName);\r\n\r\n      const currentComponentAttributes = get(\r\n        allComponentsData,\r\n        [currentComponentName, 'schema', 'attributes'],\r\n        []\r\n      );\r\n\r\n      // Retrieve the nested ones\r\n      acc.push(...retrieveComponentsFromSchema(currentComponentAttributes, allComponentsData));\r\n    }\r\n\r\n    if (type === 'dynamiczone') {\r\n      const dynamicZoneComponents = current.components;\r\n      const componentsFromDZComponents = dynamicZoneComponents.reduce((acc2: any, currentUid) => {\r\n        const compoAttrs = get(allComponentsData, [currentUid, 'schema', 'attributes'], []);\r\n\r\n        return [...acc2, ...retrieveComponentsFromSchema(compoAttrs, allComponentsData)];\r\n      }, []);\r\n\r\n      return [...acc, ...dynamicZoneComponents, ...componentsFromDZComponents];\r\n    }\r\n\r\n    return acc;\r\n  }, []);\r\n\r\n  return makeUnique<Internal.UID.Component>(allComponents);\r\n};\r\n\r\nexport { retrieveComponentsFromSchema };\r\n","import produce, { current } from 'immer';\r\nimport get from 'lodash/get';\r\nimport set from 'lodash/set';\r\n\r\nimport { getRelationType } from '../../utils/getRelationType';\r\nimport { makeUnique } from '../../utils/makeUnique';\r\n\r\nimport * as actions from './constants';\r\nimport { retrieveComponentsFromSchema } from './utils/retrieveComponentsFromSchema';\r\n\r\nimport type { DataManagerStateType, ContentType, AttributeType, Component } from '../../types';\r\nimport type { Internal, Schema } from '@strapi/types';\r\n\r\n// TODO: Define all possible actions based on type\r\nexport type Action = {\r\n  type: string;\r\n  uid?: string;\r\n  mainDataKey: 'component' | 'components' | 'contentTypes' | 'contentType';\r\n  schemaType: 'component' | 'contentType';\r\n  attributeToRemoveName?: string;\r\n  [key: string]: any;\r\n};\r\n\r\nconst initialState: DataManagerStateType = {\r\n  components: {},\r\n  contentTypes: {},\r\n  initialComponents: {},\r\n  initialContentTypes: {},\r\n  initialData: {},\r\n  modifiedData: {\r\n    components: {},\r\n    contentTypes: {},\r\n  },\r\n  reservedNames: {},\r\n  isLoading: true,\r\n  isLoadingForDataToBeSet: true,\r\n};\r\n\r\nconst ONE_SIDE_RELATIONS = ['oneWay', 'manyWay'];\r\n\r\nconst getOppositeRelation = (originalRelation?: Schema.Attribute.RelationKind.WithTarget) => {\r\n  if (originalRelation === 'manyToOne') {\r\n    return 'oneToMany';\r\n  }\r\n\r\n  if (originalRelation === 'oneToMany') {\r\n    return 'manyToOne';\r\n  }\r\n\r\n  return originalRelation;\r\n};\r\n\r\nconst findAttributeIndex = (schema: any, attributeToFind?: string) => {\r\n  return schema.schema.attributes.findIndex(\r\n    ({ name }: { name: string }) => name === attributeToFind\r\n  );\r\n};\r\n\r\nconst reducer = (state = initialState, action: Action) =>\r\n  produce(state, (draftState: any) => {\r\n    switch (action.type) {\r\n      case actions.ADD_ATTRIBUTE: {\r\n        const {\r\n          attributeToSet: { name, ...rest },\r\n          forTarget,\r\n          targetUid,\r\n        } = action;\r\n        delete rest.createComponent;\r\n\r\n        const pathToDataToEdit = ['component', 'contentType'].includes(forTarget)\r\n          ? [forTarget]\r\n          : [forTarget, targetUid];\r\n\r\n        const currentAttributes = get(\r\n          state,\r\n          ['modifiedData', ...pathToDataToEdit, 'schema', 'attributes'],\r\n          []\r\n        ).slice();\r\n\r\n        // Add the createdAttribute\r\n        const updatedAttributes = [...currentAttributes, { ...rest, name }];\r\n\r\n        set(\r\n          draftState,\r\n          ['modifiedData', ...pathToDataToEdit, 'schema', 'attributes'],\r\n          updatedAttributes\r\n        );\r\n\r\n        if (action.shouldAddComponentToData) {\r\n          const componentToAddUID = rest.component;\r\n          const componentToAdd = state.components[componentToAddUID];\r\n          const isTemporaryComponent = componentToAdd?.isTemporary;\r\n          const hasComponentAlreadyBeenAdded =\r\n            state.modifiedData.components?.[componentToAddUID] !== undefined;\r\n\r\n          if (isTemporaryComponent || hasComponentAlreadyBeenAdded) {\r\n            break;\r\n          }\r\n\r\n          // Initialize modifiedData.components if it is undefined\r\n          if (!draftState.modifiedData.components) {\r\n            draftState.modifiedData.components = {};\r\n          }\r\n\r\n          // Add the added component to the modifiedData.components\r\n          draftState.modifiedData.components[componentToAddUID] = componentToAdd;\r\n\r\n          const nestedComponents = retrieveComponentsFromSchema(\r\n            componentToAdd.schema.attributes as AttributeType[],\r\n            state.components\r\n          );\r\n\r\n          // We dont' need to set the already added components otherwise all modifications will be lost so we need to only add the not modified ones\r\n          const nestedComponentsToAddInModifiedData = nestedComponents.filter(\r\n            (compoUID: Internal.UID.Component) => {\r\n              return get(state, ['modifiedData', 'components', compoUID]) === undefined;\r\n            }\r\n          );\r\n\r\n          nestedComponentsToAddInModifiedData.forEach((compoUID: Internal.UID.Component) => {\r\n            const compoSchema = get(state, ['components', compoUID], {}) as Component;\r\n            const isTemporary = compoSchema.isTemporary || false;\r\n\r\n            // If the nested component has not been saved we don't need to add them as they are already in the state\r\n            if (!isTemporary) {\r\n              if (!draftState.modifiedData.components) {\r\n                draftState.modifiedData.components = {};\r\n              }\r\n              draftState.modifiedData.components[compoUID] = compoSchema;\r\n            }\r\n          });\r\n\r\n          break;\r\n        }\r\n\r\n        const isCreatingRelationAttribute = rest.type === 'relation';\r\n\r\n        if (isCreatingRelationAttribute) {\r\n          const target = rest.target;\r\n          const targetAttribute = rest.targetAttribute || null;\r\n          const relation = rest.relation;\r\n          const relationType = getRelationType(relation, targetAttribute);\r\n          const currentUid = get(state, ['modifiedData', ...pathToDataToEdit, 'uid']);\r\n\r\n          // When the user in creating a relation with the same content type we need to create another attribute\r\n          // that is the opposite of the created one\r\n          if (\r\n            rest.type === 'relation' &&\r\n            relationType !== 'oneWay' &&\r\n            relationType !== 'manyWay' &&\r\n            target === currentUid\r\n          ) {\r\n            const oppositeAttribute = {\r\n              name: targetAttribute,\r\n              relation: getOppositeRelation(relationType),\r\n              target,\r\n              targetAttribute: name,\r\n              type: 'relation',\r\n            } as AttributeType;\r\n\r\n            if (rest.private) {\r\n              // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n              oppositeAttribute.private = rest.private;\r\n            }\r\n\r\n            const attributesToSet = [...updatedAttributes, oppositeAttribute];\r\n\r\n            set(\r\n              draftState,\r\n              ['modifiedData', ...pathToDataToEdit, 'schema', 'attributes'],\r\n              attributesToSet\r\n            );\r\n          }\r\n        }\r\n\r\n        break;\r\n      }\r\n      case actions.ADD_CREATED_COMPONENT_TO_DYNAMIC_ZONE: {\r\n        const { dynamicZoneTarget, componentsToAdd } = action;\r\n\r\n        const dzAttributeIndex = findAttributeIndex(\r\n          state.modifiedData.contentType,\r\n          dynamicZoneTarget\r\n        );\r\n\r\n        componentsToAdd.forEach((componentUid: Internal.UID.Component) => {\r\n          if (\r\n            !draftState.modifiedData.contentType?.schema.attributes[dzAttributeIndex].components\r\n          ) {\r\n            draftState.modifiedData.contentType.schema.attributes[dzAttributeIndex].components = [];\r\n          }\r\n          draftState.modifiedData.contentType.schema.attributes[dzAttributeIndex].components.push(\r\n            componentUid\r\n          );\r\n        });\r\n\r\n        break;\r\n      }\r\n      case actions.ADD_CUSTOM_FIELD_ATTRIBUTE: {\r\n        const {\r\n          attributeToSet: { name, ...rest },\r\n          forTarget,\r\n          targetUid,\r\n        } = action;\r\n\r\n        const pathToDataToEdit = ['component', 'contentType'].includes(forTarget)\r\n          ? [forTarget]\r\n          : [forTarget, targetUid];\r\n\r\n        const currentAttributes = get(\r\n          state,\r\n          ['modifiedData', ...pathToDataToEdit, 'schema', 'attributes'],\r\n          []\r\n        ).slice();\r\n\r\n        // Add the createdAttribute\r\n        const updatedAttributes = [...currentAttributes, { ...rest, name }];\r\n\r\n        set(\r\n          draftState,\r\n          ['modifiedData', ...pathToDataToEdit, 'schema', 'attributes'],\r\n          updatedAttributes\r\n        );\r\n\r\n        break;\r\n      }\r\n      case actions.CHANGE_DYNAMIC_ZONE_COMPONENTS: {\r\n        const { dynamicZoneTarget, newComponents } = action;\r\n\r\n        const dzAttributeIndex = findAttributeIndex(\r\n          state.modifiedData.contentType,\r\n          dynamicZoneTarget\r\n        );\r\n\r\n        const currentDZComponents =\r\n          (state.modifiedData.contentType?.schema.attributes[dzAttributeIndex]).components;\r\n\r\n        const updatedComponents = makeUnique([...currentDZComponents, ...newComponents]);\r\n\r\n        (draftState.modifiedData.contentType?.schema.attributes[dzAttributeIndex]).components =\r\n          updatedComponents;\r\n\r\n        // Retrieve all the components that needs to be added to the modifiedData.components\r\n        const nestedComponents = retrieveComponentsFromSchema(\r\n          current(draftState.modifiedData.contentType.schema.attributes),\r\n          state.components\r\n        );\r\n\r\n        // We dont' need to set the already added components otherwise all modifications will be lost so we need to only add the not modified ones\r\n        const nestedComponentsToAddInModifiedData = nestedComponents.filter((compoUID) => {\r\n          return get(state, ['modifiedData', 'components', compoUID]) === undefined;\r\n        });\r\n\r\n        nestedComponentsToAddInModifiedData.forEach((compoUID: Internal.UID.Component) => {\r\n          const compoSchema = get(state, ['components', compoUID], {}) as Component;\r\n          const isTemporary = compoSchema.isTemporary || false;\r\n\r\n          // If the nested component has not been saved we don't need to add them as they are already in the state\r\n          if (!isTemporary) {\r\n            if (!draftState.modifiedData.components) {\r\n              draftState.modifiedData.components = {};\r\n            }\r\n            draftState.modifiedData.components[compoUID] = compoSchema;\r\n          }\r\n        });\r\n\r\n        break;\r\n      }\r\n      case actions.CREATE_COMPONENT_SCHEMA: {\r\n        const newSchema: Component = {\r\n          uid: action.uid as Internal.UID.Component,\r\n          isTemporary: true,\r\n          category: action.componentCategory,\r\n          schema: {\r\n            ...action.data,\r\n            attributes: [],\r\n          },\r\n        };\r\n        draftState.components[action.uid as string] = newSchema;\r\n\r\n        if (action.shouldAddComponentToData) {\r\n          draftState.modifiedData.components[action.uid as string] = newSchema;\r\n        }\r\n\r\n        break;\r\n      }\r\n      case actions.CREATE_SCHEMA: {\r\n        const newSchema: ContentType = {\r\n          uid: action.uid as Internal.UID.ContentType,\r\n          isTemporary: true,\r\n          schema: {\r\n            ...action.data,\r\n            attributes: [],\r\n          },\r\n        };\r\n\r\n        draftState.contentTypes[action.uid as string] = newSchema;\r\n\r\n        break;\r\n      }\r\n      case actions.EDIT_ATTRIBUTE: {\r\n        const {\r\n          attributeToSet: { name, ...rest },\r\n          forTarget,\r\n          targetUid,\r\n          initialAttribute,\r\n        } = action;\r\n\r\n        const initialAttributeName = initialAttribute.name;\r\n        const pathToDataToEdit = ['component', 'contentType'].includes(forTarget)\r\n          ? [forTarget]\r\n          : [forTarget, targetUid];\r\n\r\n        const initialAttributeIndex = findAttributeIndex(\r\n          get(state, ['modifiedData', ...pathToDataToEdit]),\r\n          initialAttributeName\r\n        );\r\n\r\n        const isEditingRelation = rest.type === 'relation';\r\n\r\n        if (!isEditingRelation) {\r\n          set(\r\n            draftState,\r\n            ['modifiedData', ...pathToDataToEdit, 'schema', 'attributes', initialAttributeIndex],\r\n            action.attributeToSet\r\n          );\r\n\r\n          break;\r\n        }\r\n\r\n        const updatedAttributes: AttributeType[] = get(state, [\r\n          'modifiedData',\r\n          ...pathToDataToEdit,\r\n          'schema',\r\n          'attributes',\r\n        ]).slice();\r\n\r\n        // First create the current relation attribute updated\r\n        const toSet = {\r\n          name,\r\n          relation: rest.relation,\r\n          target: rest.target,\r\n          targetAttribute: rest.targetAttribute,\r\n          type: 'relation',\r\n        } as AttributeType;\r\n\r\n        if (rest.private) {\r\n          toSet.private = rest.private;\r\n        }\r\n\r\n        if (rest.pluginOptions) {\r\n          toSet.pluginOptions = rest.pluginOptions;\r\n        }\r\n\r\n        const currentAttributeIndex = updatedAttributes.findIndex((value: AttributeType) => {\r\n          return value.name !== undefined && value.name === initialAttribute.name;\r\n        });\r\n\r\n        // First set it in the updatedAttributes\r\n        if (currentAttributeIndex !== -1) {\r\n          updatedAttributes.splice(currentAttributeIndex, 1, toSet);\r\n        }\r\n\r\n        let oppositeAttributeNameToRemove: string | null = null;\r\n        let oppositeAttributeNameToUpdate: string | null = null;\r\n        let oppositeAttributeToCreate: AttributeType | null = null;\r\n        let initialOppositeAttribute = null;\r\n\r\n        const currentUid = get(state, ['modifiedData', ...pathToDataToEdit, 'uid']);\r\n        const didChangeTargetRelation = initialAttribute.target !== rest.target;\r\n        const didCreateInternalRelation = rest.target === currentUid;\r\n        const relationType = getRelationType(rest.relation, rest.targetAttribute);\r\n        const initialRelationType = getRelationType(\r\n          initialAttribute.relation,\r\n          initialAttribute.targetAttribute\r\n        );\r\n        const hadInternalRelation = initialAttribute.target === currentUid;\r\n        const didChangeRelationType = initialRelationType !== relationType;\r\n        const shouldRemoveOppositeAttributeBecauseOfTargetChange =\r\n          didChangeTargetRelation &&\r\n          !didCreateInternalRelation &&\r\n          hadInternalRelation &&\r\n          isEditingRelation;\r\n        const shouldRemoveOppositeAttributeBecauseOfRelationTypeChange =\r\n          didChangeRelationType &&\r\n          hadInternalRelation &&\r\n          ['oneWay', 'manyWay'].includes(relationType!) &&\r\n          isEditingRelation;\r\n        const shouldUpdateOppositeAttributeBecauseOfRelationTypeChange =\r\n          !ONE_SIDE_RELATIONS.includes(initialRelationType!) &&\r\n          !ONE_SIDE_RELATIONS.includes(relationType!) &&\r\n          hadInternalRelation &&\r\n          didCreateInternalRelation &&\r\n          isEditingRelation;\r\n        const shouldCreateOppositeAttributeBecauseOfRelationTypeChange =\r\n          ONE_SIDE_RELATIONS.includes(initialRelationType!) &&\r\n          !ONE_SIDE_RELATIONS.includes(relationType!) &&\r\n          hadInternalRelation &&\r\n          didCreateInternalRelation &&\r\n          isEditingRelation;\r\n        const shouldCreateOppositeAttributeBecauseOfTargetChange =\r\n          didChangeTargetRelation &&\r\n          didCreateInternalRelation &&\r\n          !ONE_SIDE_RELATIONS.includes(relationType!);\r\n\r\n        // Store opposite attribute name to remove at the end of the loop\r\n        if (\r\n          shouldRemoveOppositeAttributeBecauseOfTargetChange ||\r\n          shouldRemoveOppositeAttributeBecauseOfRelationTypeChange\r\n        ) {\r\n          oppositeAttributeNameToRemove = initialAttribute.targetAttribute;\r\n        }\r\n\r\n        // In case of oneWay or manyWay relation there isn't an opposite attribute\r\n        if (oppositeAttributeNameToRemove) {\r\n          const indexToRemove = updatedAttributes.findIndex(\r\n            (value) => value.name === oppositeAttributeNameToRemove\r\n          );\r\n\r\n          updatedAttributes.splice(indexToRemove, 1);\r\n        }\r\n\r\n        // In order to preserve plugin options need to get the initial opposite attribute settings\r\n        if (!shouldRemoveOppositeAttributeBecauseOfTargetChange) {\r\n          const initialTargetContentType = get(state, [\r\n            'initialContentTypes',\r\n            initialAttribute.target,\r\n          ]);\r\n\r\n          if (initialTargetContentType) {\r\n            const oppositeAttributeIndex = findAttributeIndex(\r\n              initialTargetContentType,\r\n              initialAttribute.targetAttribute\r\n            );\r\n\r\n            initialOppositeAttribute = get(state, [\r\n              'initialContentTypes',\r\n              initialAttribute.target,\r\n              'schema',\r\n              'attributes',\r\n              oppositeAttributeIndex,\r\n            ]);\r\n          }\r\n        }\r\n\r\n        // Create the opposite attribute\r\n        if (\r\n          shouldCreateOppositeAttributeBecauseOfRelationTypeChange ||\r\n          shouldCreateOppositeAttributeBecauseOfTargetChange\r\n        ) {\r\n          oppositeAttributeToCreate = {\r\n            name: rest.targetAttribute,\r\n            relation: getOppositeRelation(relationType),\r\n            target: rest.target,\r\n            targetAttribute: name,\r\n            type: 'relation',\r\n          } as AttributeType;\r\n\r\n          if (rest.private) {\r\n            oppositeAttributeToCreate.private = rest.private;\r\n          }\r\n\r\n          if (initialOppositeAttribute && initialOppositeAttribute.pluginOptions) {\r\n            oppositeAttributeToCreate.pluginOptions = initialOppositeAttribute.pluginOptions;\r\n          }\r\n\r\n          const indexOfInitialAttribute = updatedAttributes.findIndex(\r\n            ({ name }) => name === initialAttribute.name\r\n          );\r\n          const indexOfUpdatedAttribute = updatedAttributes.findIndex(\r\n            ({ name: attrName }) => name === attrName\r\n          );\r\n\r\n          const indexToInsert =\r\n            (indexOfInitialAttribute === -1 ? indexOfUpdatedAttribute : indexOfInitialAttribute) +\r\n            1;\r\n\r\n          updatedAttributes.splice(indexToInsert, 0, oppositeAttributeToCreate);\r\n        }\r\n\r\n        if (shouldUpdateOppositeAttributeBecauseOfRelationTypeChange) {\r\n          oppositeAttributeNameToUpdate = initialAttribute.targetAttribute;\r\n\r\n          oppositeAttributeToCreate = {\r\n            name: rest.targetAttribute,\r\n            relation: getOppositeRelation(relationType),\r\n            target: rest.target,\r\n            targetAttribute: name,\r\n            type: 'relation',\r\n          } as AttributeType;\r\n\r\n          if (rest.private) {\r\n            oppositeAttributeToCreate.private = rest.private;\r\n          }\r\n\r\n          if (initialOppositeAttribute && initialOppositeAttribute.pluginOptions) {\r\n            oppositeAttributeToCreate.pluginOptions = initialOppositeAttribute.pluginOptions;\r\n          }\r\n\r\n          if (oppositeAttributeNameToUpdate) {\r\n            const indexToUpdate = updatedAttributes.findIndex(\r\n              ({ name }) => name === oppositeAttributeNameToUpdate\r\n            );\r\n\r\n            updatedAttributes.splice(indexToUpdate, 1, oppositeAttributeToCreate);\r\n          }\r\n        }\r\n\r\n        set(\r\n          draftState,\r\n          ['modifiedData', ...pathToDataToEdit, 'schema', 'attributes'],\r\n          updatedAttributes\r\n        );\r\n\r\n        break;\r\n      }\r\n      case actions.EDIT_CUSTOM_FIELD_ATTRIBUTE: {\r\n        const { forTarget, targetUid, initialAttribute, attributeToSet } = action;\r\n\r\n        const initialAttributeName = initialAttribute.name;\r\n        const pathToDataToEdit = ['component', 'contentType'].includes(forTarget)\r\n          ? [forTarget]\r\n          : [forTarget, targetUid];\r\n\r\n        const initialAttributeIndex = findAttributeIndex(\r\n          get(state, ['modifiedData', ...pathToDataToEdit]),\r\n          initialAttributeName\r\n        );\r\n\r\n        set(\r\n          draftState,\r\n          ['modifiedData', ...pathToDataToEdit, 'schema', 'attributes', initialAttributeIndex],\r\n          attributeToSet\r\n        );\r\n\r\n        break;\r\n      }\r\n      case actions.GET_DATA_SUCCEEDED: {\r\n        draftState.components = action.components;\r\n        draftState.initialComponents = action.components;\r\n        draftState.initialContentTypes = action.contentTypes;\r\n        draftState.contentTypes = action.contentTypes;\r\n        draftState.reservedNames = action.reservedNames;\r\n        draftState.isLoading = false;\r\n        break;\r\n      }\r\n      case actions.UPDATE_INITIAL_STATE: {\r\n        draftState.initialData = draftState.modifiedData;\r\n\r\n        break;\r\n      }\r\n      case actions.DELETE_NOT_SAVED_TYPE: {\r\n        // Doing so will also reset the modified and the initial data\r\n        draftState.contentTypes = state.initialContentTypes;\r\n        draftState.components = state.initialComponents;\r\n\r\n        break;\r\n      }\r\n      case actions.RELOAD_PLUGIN: {\r\n        return initialState;\r\n      }\r\n      case actions.REMOVE_COMPONENT_FROM_DYNAMIC_ZONE: {\r\n        const dzAttributeIndex = findAttributeIndex(state.modifiedData.contentType, action.dzName);\r\n        draftState.modifiedData.contentType.schema.attributes[dzAttributeIndex].components.splice(\r\n          action.componentToRemoveIndex,\r\n          1\r\n        );\r\n\r\n        break;\r\n      }\r\n      case actions.REMOVE_FIELD: {\r\n        const { mainDataKey, attributeToRemoveName } = action;\r\n        const pathToAttributes = ['modifiedData', mainDataKey, 'schema', 'attributes'];\r\n        const attributeToRemoveIndex = findAttributeIndex(\r\n          state.modifiedData[mainDataKey],\r\n          attributeToRemoveName\r\n        );\r\n\r\n        const pathToAttributeToRemove = [...pathToAttributes, attributeToRemoveIndex];\r\n        const attributeToRemoveData = get(state, pathToAttributeToRemove);\r\n        const isRemovingRelationAttribute = attributeToRemoveData.type === 'relation';\r\n        // Only content types can have relations with themselves since\r\n        // components can only have oneWay or manyWay relations\r\n        const canTheAttributeToRemoveHaveARelationWithItself = mainDataKey === 'contentType';\r\n\r\n        if (isRemovingRelationAttribute && canTheAttributeToRemoveHaveARelationWithItself) {\r\n          const { target, relation, targetAttribute } = attributeToRemoveData;\r\n          const relationType = getRelationType(relation, targetAttribute);\r\n\r\n          const uid = state.modifiedData.contentType?.uid;\r\n          const shouldRemoveOppositeAttribute =\r\n            target === uid && !ONE_SIDE_RELATIONS.includes(relationType!);\r\n\r\n          if (shouldRemoveOppositeAttribute) {\r\n            const attributes: AttributeType[] =\r\n              state.modifiedData[mainDataKey]?.schema.attributes.slice();\r\n            const nextAttributes = attributes.filter((attribute) => {\r\n              if (attribute.name === attributeToRemoveName) {\r\n                return false;\r\n              }\r\n\r\n              if (attribute.target === uid && attribute.targetAttribute === attributeToRemoveName) {\r\n                return false;\r\n              }\r\n\r\n              return true;\r\n            });\r\n\r\n            draftState.modifiedData[mainDataKey].schema.attributes = nextAttributes;\r\n\r\n            break;\r\n          }\r\n        }\r\n\r\n        // Find all uid fields that have the targetField set to the field we are removing\r\n\r\n        const uidFieldsToUpdate: string[] = state.modifiedData[\r\n          mainDataKey\r\n        ]!.schema.attributes.slice().reduce((acc: string[], current: AttributeType) => {\r\n          if (current.type !== 'uid') {\r\n            return acc;\r\n          }\r\n\r\n          if (current.targetField !== attributeToRemoveName) {\r\n            return acc;\r\n          }\r\n\r\n          acc.push(current.name as string);\r\n\r\n          return acc;\r\n        }, []);\r\n\r\n        uidFieldsToUpdate.forEach((fieldName) => {\r\n          const fieldIndex = findAttributeIndex(state.modifiedData[mainDataKey], fieldName);\r\n\r\n          delete draftState.modifiedData[mainDataKey]?.schema.attributes[fieldIndex].targetField;\r\n        });\r\n\r\n        draftState.modifiedData[mainDataKey]?.schema.attributes.splice(attributeToRemoveIndex, 1);\r\n\r\n        break;\r\n      }\r\n      case actions.REMOVE_FIELD_FROM_DISPLAYED_COMPONENT: {\r\n        const { attributeToRemoveName, componentUid } = action;\r\n\r\n        const attributeToRemoveIndex = findAttributeIndex(\r\n          state.modifiedData.components?.[componentUid],\r\n          attributeToRemoveName\r\n        );\r\n\r\n        draftState.modifiedData.components?.[componentUid]?.schema?.attributes?.splice(\r\n          attributeToRemoveIndex,\r\n          1\r\n        );\r\n\r\n        break;\r\n      }\r\n      case actions.SET_MODIFIED_DATA: {\r\n        draftState.isLoadingForDataToBeSet = false;\r\n        draftState.initialData = action.schemaToSet;\r\n        draftState.modifiedData = action.schemaToSet;\r\n\r\n        // Reset the state with the initial data\r\n        // All created components and content types will be lost\r\n        if (!action.hasJustCreatedSchema) {\r\n          draftState.components = state.initialComponents;\r\n          draftState.contentTypes = state.initialContentTypes;\r\n        }\r\n\r\n        break;\r\n      }\r\n      case actions.UPDATE_SCHEMA: {\r\n        const {\r\n          data: { displayName, category, icon, kind },\r\n          schemaType,\r\n          uid,\r\n        } = action;\r\n\r\n        draftState.modifiedData[schemaType].schema.displayName = displayName;\r\n\r\n        if (action.schemaType === 'component') {\r\n          draftState.modifiedData.component.category = category;\r\n          draftState.modifiedData.component.schema.icon = icon;\r\n          const addedComponent = current(draftState.modifiedData.component);\r\n          draftState.components[uid as string] = addedComponent;\r\n\r\n          break;\r\n        }\r\n\r\n        draftState.modifiedData.contentType.schema.kind = kind;\r\n\r\n        break;\r\n      }\r\n      default:\r\n        return draftState;\r\n    }\r\n  });\r\n\r\nexport { initialState, reducer };\r\n","import slugify from '@sindresorhus/slugify';\r\n\r\nexport const nameToSlug = (name: string) => slugify(name, { separator: '-' });\r\n","export const ON_CHANGE = 'ContentTypeBuilder/FormModal/ON_CHANGE';\r\nexport const ON_CHANGE_RELATION_TARGET = 'ContentTypeBuilder/FormModal/ON_CHANGE_RELATION_TARGET';\r\nexport const ON_CHANGE_RELATION_TYPE = 'ContentTypeBuilder/FormModal/ON_CHANGE_RELATION_TYPE';\r\nexport const RESET_PROPS = 'ContentTypeBuilder/FormModal/RESET_PROPS';\r\nexport const RESET_PROPS_AND_SET_FORM_FOR_ADDING_AN_EXISTING_COMPO =\r\n  'ContentTypeBuilder/FormModal/RESET_PROPS_AND_SET_FORM_FOR_ADDING_AN_EXISTING_COMPO';\r\nexport const RESET_PROPS_AND_SAVE_CURRENT_DATA =\r\n  'ContentTypeBuilder/FormModal/RESET_PROPS_AND_SAVE_CURRENT_DATA';\r\nexport const RESET_PROPS_AND_SET_THE_FORM_FOR_ADDING_A_COMPO_TO_A_DZ =\r\n  'ContentTypeBuilder/FormModal/RESET_PROPS_AND_SET_THE_FORM_FOR_ADDING_A_COMPO_TO_A_DZ';\r\nexport const SET_DATA_TO_EDIT = 'ContentTypeBuilder/FormModal/SET_DATA_TO_EDIT';\r\nexport const SET_ATTRIBUTE_DATA_SCHEMA = 'ContentTypeBuilder/FormModal/SET_ATTRIBUTE_DATA_SCHEMA';\r\nexport const SET_CUSTOM_FIELD_DATA_SCHEMA =\r\n  'ContentTypeBuilder/FormModal/SET_CUSTOM_FIELD_DATA_SCHEMA';\r\nexport const SET_DYNAMIC_ZONE_DATA_SCHEMA =\r\n  'ContentTypeBuilder/FormModal/SET_DYNAMIC_ZONE_DATA_SCHEMA';\r\nexport const SET_ERRORS = 'ContentTypeBuilder/FormModal/SET_ERRORS';\r\n","import { nameToSlug } from '../../../utils/nameToSlug';\r\n\r\nimport type { Internal } from '@strapi/types';\r\n\r\nconst createUid = (name: string): Internal.UID.ContentType => {\r\n  const modelName = nameToSlug(name);\r\n  return `api::${modelName}.${modelName}`;\r\n};\r\n\r\n// From `content-type-builder/services/Components/createComponentUid`\r\nconst createComponentUid = (name: string, category: string): Internal.UID.Component => {\r\n  return `${nameToSlug(category)}.${nameToSlug(name)}`;\r\n};\r\n\r\nexport { createComponentUid, createUid };\r\n","export const customFieldDefaultOptionsReducer = (acc: any, option: any) => {\r\n  if (option.items) {\r\n    return option.items.reduce(customFieldDefaultOptionsReducer, acc);\r\n  }\r\n\r\n  if ('defaultValue' in option) {\r\n    const { name, defaultValue } = option;\r\n    acc.push({ name, defaultValue });\r\n  }\r\n\r\n  return acc;\r\n};\r\n","/* eslint-disable no-confusing-arrow */\r\n\r\nimport type { Schema } from '@strapi/types';\r\n\r\nconst shouldPluralizeName = (nature: Schema.Attribute.RelationKind.Any) =>\r\n  ['manyToMany', 'oneToMany', 'manyWay'].includes(nature) ? 2 : 1;\r\n\r\nconst shouldPluralizeTargetAttribute = (nature: Schema.Attribute.RelationKind.Any) =>\r\n  ['manyToMany', 'manyToOne'].includes(nature) ? 2 : 1;\r\n\r\nexport { shouldPluralizeName, shouldPluralizeTargetAttribute };\r\n","import { produce } from 'immer';\r\nimport set from 'lodash/set';\r\nimport snakeCase from 'lodash/snakeCase';\r\nimport pluralize from 'pluralize';\r\n\r\nimport { getRelationType } from '../../utils/getRelationType';\r\nimport { nameToSlug } from '../../utils/nameToSlug';\r\n\r\nimport * as actions from './constants';\r\nimport { createComponentUid } from './utils/createUid';\r\nimport { customFieldDefaultOptionsReducer } from './utils/customFieldDefaultOptionsReducer';\r\nimport { shouldPluralizeName, shouldPluralizeTargetAttribute } from './utils/relations';\r\n\r\nimport type { AnyAction } from '@reduxjs/toolkit';\r\n\r\nconst initialState: any = {\r\n  formErrors: {},\r\n  modifiedData: {},\r\n  initialData: {},\r\n  componentToCreate: {},\r\n  isCreatingComponentWhileAddingAField: false,\r\n};\r\n\r\nconst reducer = (state = initialState, action: AnyAction) =>\r\n  // eslint-disable-next-line consistent-return\r\n  produce(state, (draftState: any) => {\r\n    switch (action.type) {\r\n      case actions.ON_CHANGE: {\r\n        const { keys, value } = action;\r\n        const obj = state.modifiedData;\r\n        const hasDefaultValue = Boolean(obj.default);\r\n\r\n        // There is no need to remove the default key if the default value isn't defined\r\n        if (hasDefaultValue && keys.length === 1 && keys.includes('type')) {\r\n          const previousType = obj.type;\r\n\r\n          if (previousType && ['date', 'datetime', 'time'].includes(previousType)) {\r\n            // return obj.updateIn(keys, () => value).remove('default');\r\n            delete draftState.modifiedData.default;\r\n          }\r\n        }\r\n\r\n        set(draftState, ['modifiedData', ...keys], value);\r\n\r\n        break;\r\n      }\r\n      case actions.ON_CHANGE_RELATION_TARGET: {\r\n        const {\r\n          target: {\r\n            oneThatIsCreatingARelationWithAnother,\r\n            selectedContentTypeFriendlyName,\r\n            targetContentTypeAllowedRelations,\r\n            value,\r\n          },\r\n        } = action;\r\n        // Special case for the admin user...\r\n        let didChangeRelationTypeBecauseOfRestrictedRelation = false;\r\n        let changedRelationType = null;\r\n\r\n        set(draftState, ['modifiedData', 'target'], value);\r\n\r\n        const modifiedData = state.modifiedData;\r\n\r\n        // Don't change the relation type if the allowed relations are not restricted\r\n        // TODO: replace with an obj { relation: 'x', bidirctional: true|false } when BE ready\r\n        if (Array.isArray(targetContentTypeAllowedRelations)) {\r\n          const currentRelationType = getRelationType(\r\n            modifiedData.relation,\r\n            modifiedData.targetAttribute\r\n          );\r\n\r\n          if (!targetContentTypeAllowedRelations.includes(currentRelationType)) {\r\n            const relationToSet = targetContentTypeAllowedRelations[0];\r\n            didChangeRelationTypeBecauseOfRestrictedRelation = true;\r\n            changedRelationType = relationToSet;\r\n\r\n            if (relationToSet === 'oneWay') {\r\n              set(draftState, ['modifiedData', 'relation'], 'oneToOne');\r\n            } else if (relationToSet === 'manyWay') {\r\n              set(draftState, ['modifiedData', 'relation'], 'oneToMany');\r\n            } else {\r\n              set(draftState, ['modifiedData', 'relation'], relationToSet);\r\n            }\r\n          }\r\n        }\r\n\r\n        let nameToSet;\r\n\r\n        if (didChangeRelationTypeBecauseOfRestrictedRelation) {\r\n          nameToSet = pluralize(\r\n            snakeCase(nameToSlug(selectedContentTypeFriendlyName)),\r\n            shouldPluralizeName(changedRelationType)\r\n          );\r\n        } else {\r\n          nameToSet = pluralize(\r\n            snakeCase(nameToSlug(selectedContentTypeFriendlyName)),\r\n\r\n            shouldPluralizeName(modifiedData.relation)\r\n          );\r\n        }\r\n\r\n        set(draftState, ['modifiedData', 'name'], nameToSet);\r\n\r\n        const currentTargetAttribute = state.modifiedData.targetAttribute;\r\n\r\n        if (currentTargetAttribute === null) {\r\n          break;\r\n        }\r\n\r\n        // Changing the target and the relation is either oneWay or manyWay\r\n        // Case when we need to change the relation to oneWay (ex: admin user)\r\n        if (\r\n          didChangeRelationTypeBecauseOfRestrictedRelation &&\r\n          ['oneWay', 'manyWay'].includes(changedRelationType)\r\n        ) {\r\n          set(draftState, ['modifiedData', 'targetAttribute'], null);\r\n\r\n          break;\r\n        }\r\n\r\n        const targetAttributeToSet = pluralize(\r\n          snakeCase(nameToSlug(oneThatIsCreatingARelationWithAnother)),\r\n          shouldPluralizeTargetAttribute(modifiedData.relation)\r\n        );\r\n\r\n        set(draftState, ['modifiedData', 'targetAttribute'], targetAttributeToSet);\r\n\r\n        break;\r\n      }\r\n      case actions.ON_CHANGE_RELATION_TYPE: {\r\n        const {\r\n          target: { oneThatIsCreatingARelationWithAnother, value },\r\n        } = action;\r\n\r\n        const currentName = state.modifiedData.name;\r\n\r\n        // Switching from oneWay\r\n        if (!['oneWay', 'manyWay'].includes(value)) {\r\n          set(draftState, ['modifiedData', 'relation'], value);\r\n          const currentTargetAttribute = state.modifiedData.targetAttribute;\r\n\r\n          set(\r\n            draftState,\r\n            ['modifiedData', 'name'],\r\n            pluralize(snakeCase(nameToSlug(currentName)), shouldPluralizeName(value))\r\n          );\r\n\r\n          set(\r\n            draftState,\r\n            ['modifiedData', 'targetAttribute'],\r\n            pluralize(\r\n              currentTargetAttribute ||\r\n                snakeCase(nameToSlug(oneThatIsCreatingARelationWithAnother)),\r\n              shouldPluralizeTargetAttribute(value)\r\n            )\r\n          );\r\n\r\n          break;\r\n        }\r\n\r\n        if (value === 'oneWay') {\r\n          set(draftState, ['modifiedData', 'relation'], 'oneToOne');\r\n          set(draftState, ['modifiedData', 'targetAttribute'], null);\r\n          set(draftState, ['modifiedData', 'name'], pluralize(snakeCase(currentName), 1));\r\n\r\n          break;\r\n        }\r\n\r\n        // manyWay\r\n        set(draftState, ['modifiedData', 'relation'], 'oneToMany');\r\n        set(draftState, ['modifiedData', 'targetAttribute'], null);\r\n        set(draftState, ['modifiedData', 'name'], pluralize(snakeCase(currentName), 2));\r\n\r\n        break;\r\n      }\r\n\r\n      case actions.RESET_PROPS:\r\n        return initialState;\r\n      case actions.RESET_PROPS_AND_SET_FORM_FOR_ADDING_AN_EXISTING_COMPO: {\r\n        // This is run when the user doesn't want to create a new component\r\n\r\n        const nextState = {\r\n          ...initialState,\r\n          modifiedData: {\r\n            type: 'component',\r\n            repeatable: true,\r\n            ...action.options,\r\n          },\r\n        };\r\n\r\n        return nextState;\r\n      }\r\n      case actions.RESET_PROPS_AND_SAVE_CURRENT_DATA: {\r\n        // This is run when the user has created a new component\r\n        const componentToCreate = state.modifiedData.componentToCreate;\r\n        const modifiedData = {\r\n          displayName: componentToCreate.displayName,\r\n          type: 'component',\r\n          repeatable: false,\r\n          ...action.options,\r\n          component: createComponentUid(componentToCreate.displayName, componentToCreate.category),\r\n        };\r\n\r\n        const nextState = {\r\n          ...initialState,\r\n          componentToCreate,\r\n          modifiedData,\r\n          isCreatingComponentWhileAddingAField: state.modifiedData.createComponent,\r\n        };\r\n\r\n        return nextState;\r\n      }\r\n      case actions.RESET_PROPS_AND_SET_THE_FORM_FOR_ADDING_A_COMPO_TO_A_DZ: {\r\n        const createdDZ = state.modifiedData;\r\n        const dataToSet = {\r\n          ...createdDZ,\r\n          createComponent: true,\r\n          componentToCreate: { type: 'component' },\r\n        };\r\n\r\n        return { ...initialState, modifiedData: dataToSet };\r\n      }\r\n      case actions.SET_DATA_TO_EDIT: {\r\n        draftState.modifiedData = action.data;\r\n        draftState.initialData = action.data;\r\n        break;\r\n      }\r\n      case actions.SET_ATTRIBUTE_DATA_SCHEMA: {\r\n        const {\r\n          attributeType,\r\n          isEditing,\r\n          modifiedDataToSetForEditing,\r\n          nameToSetForRelation,\r\n          targetUid,\r\n          step,\r\n          options = {},\r\n        } = action;\r\n\r\n        if (isEditing) {\r\n          draftState.modifiedData = modifiedDataToSetForEditing;\r\n          draftState.initialData = modifiedDataToSetForEditing;\r\n\r\n          break;\r\n        }\r\n\r\n        let dataToSet;\r\n\r\n        if (attributeType === 'component') {\r\n          if (step === '1') {\r\n            dataToSet = {\r\n              type: 'component',\r\n              createComponent: true,\r\n              componentToCreate: { type: 'component' },\r\n            };\r\n          } else {\r\n            dataToSet = {\r\n              ...options,\r\n              type: 'component',\r\n              repeatable: true,\r\n            };\r\n          }\r\n        } else if (attributeType === 'dynamiczone') {\r\n          dataToSet = {\r\n            ...options,\r\n            type: 'dynamiczone',\r\n            components: [],\r\n          };\r\n        } else if (attributeType === 'text') {\r\n          dataToSet = { ...options, type: 'string' };\r\n        } else if (attributeType === 'number' || attributeType === 'date') {\r\n          dataToSet = options;\r\n        } else if (attributeType === 'media') {\r\n          dataToSet = {\r\n            allowedTypes: ['images', 'files', 'videos', 'audios'],\r\n            type: 'media',\r\n            multiple: true,\r\n            ...options,\r\n          };\r\n        } else if (attributeType === 'enumeration') {\r\n          dataToSet = { ...options, type: 'enumeration', enum: [] };\r\n        } else if (attributeType === 'relation') {\r\n          dataToSet = {\r\n            name: snakeCase(nameToSetForRelation),\r\n            relation: 'oneToOne',\r\n            targetAttribute: null,\r\n            target: targetUid,\r\n            type: 'relation',\r\n          };\r\n        } else {\r\n          dataToSet = { ...options, type: attributeType, default: null };\r\n        }\r\n\r\n        draftState.modifiedData = dataToSet;\r\n\r\n        break;\r\n      }\r\n      case actions.SET_CUSTOM_FIELD_DATA_SCHEMA: {\r\n        const { customField, isEditing, modifiedDataToSetForEditing, options = {} } = action;\r\n\r\n        if (isEditing) {\r\n          draftState.modifiedData = modifiedDataToSetForEditing;\r\n          draftState.initialData = modifiedDataToSetForEditing;\r\n\r\n          break;\r\n        }\r\n\r\n        draftState.modifiedData = { ...options, type: customField.type };\r\n\r\n        const allOptions = [\r\n          ...(customField?.options?.base || []),\r\n          ...(customField?.options?.advanced || []),\r\n        ];\r\n\r\n        const optionDefaults = allOptions.reduce(customFieldDefaultOptionsReducer, []);\r\n\r\n        if (optionDefaults.length) {\r\n          optionDefaults.forEach(({ name, defaultValue }: { name: string; defaultValue: string }) =>\r\n            set(draftState.modifiedData, name, defaultValue)\r\n          );\r\n        }\r\n\r\n        break;\r\n      }\r\n      case actions.SET_DYNAMIC_ZONE_DATA_SCHEMA: {\r\n        draftState.modifiedData = action.attributeToEdit;\r\n        draftState.initialData = action.attributeToEdit;\r\n        break;\r\n      }\r\n      case actions.SET_ERRORS: {\r\n        draftState.formErrors = action.errors;\r\n        break;\r\n      }\r\n      default:\r\n        return draftState;\r\n    }\r\n  });\r\n\r\nexport { initialState, reducer };\r\n","import { reducer } from './components/DataManagerProvider/reducer';\r\nimport { reducer as formModalReducer } from './components/FormModal/reducer';\r\nimport { pluginId } from './pluginId';\r\n\r\nexport const reducers = {\r\n  [`${pluginId}_formModal`]: formModalReducer,\r\n  [`${pluginId}_dataManagerProvider`]: reducer,\r\n};\r\n","import cloneDeep from 'lodash/cloneDeep';\r\nimport get from 'lodash/get';\r\nimport * as yup from 'yup';\r\n// TODO V5 Convert any into real types\r\nexport const formsAPI: any = {\r\n  components: {\r\n    inputs: {} as Record<string, any>,\r\n    add({ id, component }: { id: string; component: any }) {\r\n      if (!this.inputs[id]) {\r\n        this.inputs[id] = component;\r\n      }\r\n    },\r\n  },\r\n  types: {\r\n    attribute: {\r\n      // test: {\r\n      //   validators: [],\r\n      //   form: {\r\n      //     advanced: [\r\n      //       /* cb */\r\n      //     ],\r\n      //     base: [\r\n      //       /* cb */\r\n      //     ],\r\n      //   },\r\n      // },\r\n    },\r\n    contentType: {\r\n      validators: [],\r\n      form: {\r\n        advanced: [],\r\n        base: [],\r\n      },\r\n    },\r\n    component: {\r\n      validators: [],\r\n      form: {\r\n        advanced: [],\r\n        base: [],\r\n      },\r\n    },\r\n  },\r\n  contentTypeSchemaMutations: [],\r\n  addContentTypeSchemaMutation(cb: any) {\r\n    this.contentTypeSchemaMutations.push(cb);\r\n  },\r\n  extendContentType({ validator, form: { advanced, base } }: any) {\r\n    const { contentType } = this.types;\r\n\r\n    contentType.validators.push(validator);\r\n    contentType.form.advanced.push(advanced);\r\n    contentType.form.base.push(base);\r\n  },\r\n  extendFields(fields: any, { validator, form: { advanced, base } }: any) {\r\n    const formType = this.types.attribute;\r\n\r\n    fields.forEach((field: any) => {\r\n      if (!formType[field]) {\r\n        formType[field] = {\r\n          validators: [],\r\n          form: {\r\n            advanced: [\r\n              /* cb */\r\n            ],\r\n            base: [\r\n              /* cb */\r\n            ],\r\n          },\r\n        };\r\n      }\r\n\r\n      formType[field].validators.push(validator);\r\n      formType[field].form.advanced.push(advanced);\r\n      formType[field].form.base.push(base);\r\n    });\r\n  },\r\n\r\n  getAdvancedForm(target: any, props = null) {\r\n    const sectionsToAdd = get(this.types, [...target, 'form', 'advanced'], []).reduce(\r\n      (acc: any, current: any) => {\r\n        const sections = current(props);\r\n\r\n        return [...acc, ...sections];\r\n      },\r\n      []\r\n    );\r\n\r\n    return sectionsToAdd;\r\n  },\r\n\r\n  makeCustomFieldValidator(attributeShape: any, validator: any, ...validatorArgs: any) {\r\n    // When no validator, return the attribute shape\r\n    if (!validator) return attributeShape;\r\n\r\n    // Otherwise extend the shape with the provided validator\r\n    return attributeShape.shape({ options: yup.object().shape(validator(validatorArgs)) });\r\n  },\r\n\r\n  makeValidator(target: any, initShape: any, ...args: any) {\r\n    const validators = get(this.types, [...target, 'validators'], []);\r\n\r\n    const pluginOptionsShape = validators.reduce((acc: any, current: any) => {\r\n      const pluginOptionShape = current(args);\r\n\r\n      return { ...acc, ...pluginOptionShape };\r\n    }, {});\r\n\r\n    return initShape.shape({ pluginOptions: yup.object().shape(pluginOptionsShape) });\r\n  },\r\n  mutateContentTypeSchema(data: Record<string, unknown>, initialData: Record<string, unknown>) {\r\n    let enhancedData: any = cloneDeep(data);\r\n\r\n    const refData: any = cloneDeep(initialData);\r\n\r\n    this.contentTypeSchemaMutations.forEach((cb: any) => {\r\n      enhancedData = cb(enhancedData, refData);\r\n    });\r\n\r\n    return enhancedData;\r\n  },\r\n};\r\n","type TradOptions = Record<string, string>;\r\n\r\nconst prefixPluginTranslations = (trad: TradOptions, pluginId: string): TradOptions => {\r\n  if (!pluginId) {\r\n    throw new TypeError(\"pluginId can't be empty\");\r\n  }\r\n  return Object.keys(trad).reduce((acc, current) => {\r\n    acc[`${pluginId}.${current}`] = trad[current];\r\n    return acc;\r\n  }, {} as TradOptions);\r\n};\r\n\r\nexport { prefixPluginTranslations };\r\n","import * as React from 'react';\r\n\r\nimport { Box, Flex, Typography, Link } from '@strapi/design-system';\r\nimport { Clock, ArrowClockwise } from '@strapi/icons';\r\nimport { createPortal } from 'react-dom';\r\nimport { MessageDescriptor, useIntl } from 'react-intl';\r\nimport { styled, keyframes } from 'styled-components';\r\n\r\n/**\r\n * TODO: realistically a lot of this logic is isolated to the `core/admin` package.\r\n * However, we want to expose the `useAutoReloadOverlayBlocker` hook to the plugins.\r\n *\r\n * Therefore, in V5 we should move this logic back to the `core/admin` package & export\r\n * the hook from that package and re-export here. For now, let's keep it all together\r\n * because it's easier to diagnose and we're not using a million refs because we don't\r\n * understand what's going on.\r\n */\r\nexport interface AutoReloadOverlayBlockerConfig {\r\n  title?: string;\r\n  description?: string;\r\n  icon?: 'reload' | 'time';\r\n}\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * Context\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\nexport interface AutoReloadOverlayBlockerContextValue {\r\n  lockAppWithAutoreload?: (config?: AutoReloadOverlayBlockerConfig) => void;\r\n  unlockAppWithAutoreload?: () => void;\r\n}\r\n\r\nconst AutoReloadOverlayBlockerContext = React.createContext<AutoReloadOverlayBlockerContextValue>(\r\n  {}\r\n);\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * Provider\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\nexport interface AutoReloadOverlayBlockerProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst MAX_ELAPSED_TIME = 30 * 1000;\r\n\r\nconst AutoReloadOverlayBlockerProvider = ({ children }: AutoReloadOverlayBlockerProviderProps) => {\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const [config, setConfig] = React.useState<AutoReloadOverlayBlockerConfig>({});\r\n  const [failed, setFailed] = React.useState(false);\r\n\r\n  const lockAppWithAutoreload = React.useCallback((config: AutoReloadOverlayBlockerConfig = {}) => {\r\n    setIsOpen(true);\r\n    setConfig(config);\r\n  }, []);\r\n\r\n  const unlockAppWithAutoreload = React.useCallback(() => {\r\n    setIsOpen(false);\r\n    setConfig({});\r\n  }, []);\r\n\r\n  // eslint-disable-next-line consistent-return\r\n  React.useEffect(() => {\r\n    if (isOpen) {\r\n      const timeout = setTimeout(() => {\r\n        setFailed(true);\r\n      }, MAX_ELAPSED_TIME);\r\n\r\n      return () => {\r\n        clearTimeout(timeout);\r\n      };\r\n    }\r\n  }, [isOpen]);\r\n\r\n  let displayedIcon = config?.icon || 'reload';\r\n\r\n  let description = {\r\n    id: config?.description || 'components.OverlayBlocker.description',\r\n    defaultMessage:\r\n      \"You're using a feature that needs the server to restart. The page will reload automatically.\",\r\n  };\r\n\r\n  let title = {\r\n    id: config?.title || 'components.OverlayBlocker.title',\r\n    defaultMessage: 'Waiting for restart',\r\n  };\r\n\r\n  if (failed) {\r\n    displayedIcon = 'time';\r\n\r\n    description = {\r\n      id: 'components.OverlayBlocker.description.serverError',\r\n      defaultMessage: 'The server should have restarted, please check your logs in the terminal.',\r\n    };\r\n\r\n    title = {\r\n      id: 'components.OverlayBlocker.title.serverError',\r\n      defaultMessage: 'The restart is taking longer than expected',\r\n    };\r\n  }\r\n\r\n  const autoReloadValue = React.useMemo(\r\n    () => ({\r\n      lockAppWithAutoreload,\r\n      unlockAppWithAutoreload,\r\n    }),\r\n    [lockAppWithAutoreload, unlockAppWithAutoreload]\r\n  );\r\n\r\n  return (\r\n    <AutoReloadOverlayBlockerContext.Provider value={autoReloadValue}>\r\n      <Blocker\r\n        displayedIcon={displayedIcon}\r\n        isOpen={isOpen}\r\n        description={description}\r\n        title={title}\r\n      />\r\n      {children}\r\n    </AutoReloadOverlayBlockerContext.Provider>\r\n  );\r\n};\r\n\r\ninterface BlockerProps {\r\n  displayedIcon: string;\r\n  description: MessageDescriptor;\r\n  isOpen: boolean;\r\n  title: MessageDescriptor;\r\n}\r\n\r\nconst Blocker = ({ displayedIcon, description, title, isOpen }: BlockerProps) => {\r\n  const { formatMessage } = useIntl();\r\n\r\n  // eslint-disable-next-line no-undef\r\n  return isOpen && globalThis?.document?.body\r\n    ? createPortal(\r\n        <Overlay id=\"autoReloadOverlayBlocker\" direction=\"column\" alignItems=\"center\" gap={6}>\r\n          <Flex direction=\"column\" alignItems=\"center\" gap={2}>\r\n            <Typography tag=\"h1\" variant=\"alpha\">\r\n              {formatMessage(title)}\r\n            </Typography>\r\n            <Typography tag=\"h2\" textColor=\"neutral600\" fontSize={4} fontWeight=\"regular\">\r\n              {formatMessage(description)}\r\n            </Typography>\r\n          </Flex>\r\n          {displayedIcon === 'reload' && (\r\n            <IconBox padding={6} background=\"primary100\" borderColor=\"primary200\">\r\n              <LoaderReload width=\"3.6rem\" height=\"3.6rem\" />\r\n            </IconBox>\r\n          )}\r\n          {displayedIcon === 'time' && (\r\n            <IconBox padding={6} background=\"primary100\" borderColor=\"primary200\">\r\n              <Clock width=\"4rem\" height=\"4rem\" />\r\n            </IconBox>\r\n          )}\r\n          <Box marginTop={2}>\r\n            <Link href=\"https://docs.strapi.io\" isExternal>\r\n              {formatMessage({\r\n                id: 'global.documentation',\r\n                defaultMessage: 'Read the documentation',\r\n              })}\r\n            </Link>\r\n          </Box>\r\n        </Overlay>,\r\n        // eslint-disable-next-line no-undef\r\n        globalThis.document.body\r\n      )\r\n    : null;\r\n};\r\n\r\nconst rotation = keyframes`\r\n    from {\r\n      transform: rotate(0deg);\r\n    }\r\n    to {\r\n      transform: rotate(359deg);\r\n    }\r\n  `;\r\n\r\nconst LoaderReload = styled(ArrowClockwise)`\r\n  animation: ${rotation} 1s infinite linear;\r\n`;\r\n\r\nconst Overlay = styled(Flex)`\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  /* TODO: set this up in the theme for consistence z-index values */\r\n  z-index: 1140;\r\n  padding-top: 16rem;\r\n\r\n  & > * {\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n\r\n  &:before {\r\n    content: '';\r\n    position: fixed;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    background: ${({ theme }) => theme.colors.neutral0};\r\n    opacity: 0.9;\r\n  }\r\n`;\r\n\r\nconst IconBox = styled(Box)`\r\n  border-radius: 50%;\r\n  svg {\r\n    > path {\r\n      fill: ${({ theme }) => theme.colors.primary600} !important;\r\n    }\r\n  }\r\n`;\r\n\r\n/* -------------------------------------------------------------------------------------------------\r\n * Hook\r\n * -----------------------------------------------------------------------------------------------*/\r\n\r\nconst useAutoReloadOverlayBlocker = () => React.useContext(AutoReloadOverlayBlockerContext);\r\n\r\nexport { AutoReloadOverlayBlockerProvider, useAutoReloadOverlayBlocker };\r\n","import { Layout } from '@strapi/icons';\r\n\r\nimport pluginPkg from '../../package.json';\r\n\r\nimport { PERMISSIONS } from './constants';\r\nimport { pluginId } from './pluginId';\r\nimport { reducers } from './reducers';\r\nimport { formsAPI } from './utils/formAPI';\r\nimport { prefixPluginTranslations } from './utils/prefixPluginTranslations';\r\n\r\nconst name = pluginPkg.strapi.name;\r\n\r\n// eslint-disable-next-line import/no-default-export\r\nexport default {\r\n  register(app: any) {\r\n    app.addReducers(reducers);\r\n    app.addMenuLink({\r\n      to: `plugins/${pluginId}`,\r\n      icon: Layout,\r\n      intlLabel: {\r\n        id: `${pluginId}.plugin.name`,\r\n        defaultMessage: 'Content Types Builder',\r\n      },\r\n      permissions: PERMISSIONS.main,\r\n      Component: () => import('./pages/App'),\r\n      position: 5,\r\n    });\r\n\r\n    app.registerPlugin({\r\n      id: pluginId,\r\n      name,\r\n      // Internal APIs exposed by the CTB for the other plugins to use\r\n      apis: {\r\n        forms: formsAPI,\r\n      },\r\n    });\r\n  },\r\n  bootstrap() {},\r\n  async registerTrads({ locales }: { locales: string[] }) {\r\n    const importedTrads = await Promise.all(\r\n      locales.map((locale) => {\r\n        return import(`./translations/${locale}.json`)\r\n          .then(({ default: data }) => {\r\n            return {\r\n              data: prefixPluginTranslations(data, pluginId),\r\n              locale,\r\n            };\r\n          })\r\n          .catch(() => {\r\n            return {\r\n              data: {},\r\n              locale,\r\n            };\r\n          });\r\n      })\r\n    );\r\n\r\n    return Promise.resolve(importedTrads);\r\n  },\r\n};\r\n\r\nexport * from './exports';\r\n"],"names":["current","initialState","name","reducer","actions.ADD_ATTRIBUTE","actions.ADD_CREATED_COMPONENT_TO_DYNAMIC_ZONE","actions.ADD_CUSTOM_FIELD_ATTRIBUTE","actions.CHANGE_DYNAMIC_ZONE_COMPONENTS","actions.CREATE_COMPONENT_SCHEMA","actions.CREATE_SCHEMA","actions.EDIT_ATTRIBUTE","actions.EDIT_CUSTOM_FIELD_ATTRIBUTE","actions.GET_DATA_SUCCEEDED","actions.UPDATE_INITIAL_STATE","actions.DELETE_NOT_SAVED_TYPE","actions.RELOAD_PLUGIN","actions.REMOVE_COMPONENT_FROM_DYNAMIC_ZONE","actions.REMOVE_FIELD","actions.REMOVE_FIELD_FROM_DISPLAYED_COMPONENT","actions.SET_MODIFIED_DATA","actions.UPDATE_SCHEMA","produce","actions.ON_CHANGE","actions.ON_CHANGE_RELATION_TARGET","actions.ON_CHANGE_RELATION_TYPE","actions.RESET_PROPS","actions.RESET_PROPS_AND_SET_FORM_FOR_ADDING_AN_EXISTING_COMPO","actions.RESET_PROPS_AND_SAVE_CURRENT_DATA","actions.RESET_PROPS_AND_SET_THE_FORM_FOR_ADDING_A_COMPO_TO_A_DZ","actions.SET_DATA_TO_EDIT","actions.SET_ATTRIBUTE_DATA_SCHEMA","actions.SET_CUSTOM_FIELD_DATA_SCHEMA","actions.SET_DYNAMIC_ZONE_DATA_SCHEMA","actions.SET_ERRORS","formModalReducer","pluginId","config","description"],"mappings":"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"}