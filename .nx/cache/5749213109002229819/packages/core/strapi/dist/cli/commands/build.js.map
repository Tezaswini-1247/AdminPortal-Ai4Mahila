{"version":3,"file":"build.js","sources":["../../../src/cli/commands/build.ts"],"sourcesContent":["import { createCommand } from 'commander';\r\nimport type { StrapiCommand } from '../types';\r\n\r\nimport { build as nodeBuild, BuildOptions } from '../../node/build';\r\nimport { handleUnexpectedError } from '../../node/core/errors';\r\n\r\ntype BuildCLIOptions = BuildOptions;\r\n\r\nconst action = async (options: BuildCLIOptions) => {\r\n  try {\r\n    if (options.bundler === 'webpack') {\r\n      options.logger.warn(\r\n        '[@strapi/strapi]: Using webpack as a bundler is deprecated. You should migrate to vite.'\r\n      );\r\n    }\r\n\r\n    await nodeBuild(options);\r\n  } catch (err) {\r\n    handleUnexpectedError(err);\r\n  }\r\n};\r\n\r\n/**\r\n * `$ strapi build`\r\n */\r\nconst command: StrapiCommand = ({ ctx }) => {\r\n  return createCommand('build')\r\n    .option('--bundler [bundler]', 'Bundler to use (webpack or vite)', 'vite')\r\n    .option('-d, --debug', 'Enable debugging mode with verbose logs', false)\r\n    .option('--minify', 'Minify the output', true)\r\n    .option('--silent', \"Don't log anything\", false)\r\n    .option('--sourcemap', 'Produce sourcemaps', false)\r\n    .option('--stats', 'Print build statistics to the console', false)\r\n    .description('Build the strapi admin app')\r\n    .action(async (options: BuildCLIOptions) => {\r\n      return action({ ...options, ...ctx });\r\n    });\r\n};\r\n\r\nexport { command };\r\n"],"names":["nodeBuild","handleUnexpectedError","createCommand"],"mappings":";;;;;AAQA,MAAM,SAAS,OAAO,YAA6B;AAC7C,MAAA;AACE,QAAA,QAAQ,YAAY,WAAW;AACjC,cAAQ,OAAO;AAAA,QACb;AAAA,MACF;AAAA,IAAA;AAGF,UAAMA,MAAAA,MAAU,OAAO;AAAA,WAChB,KAAK;AACZC,WAAAA,sBAAsB,GAAG;AAAA,EAAA;AAE7B;AAKA,MAAM,UAAyB,CAAC,EAAE,UAAU;AAC1C,SAAOC,UAAAA,cAAc,OAAO,EACzB,OAAO,uBAAuB,oCAAoC,MAAM,EACxE,OAAO,eAAe,2CAA2C,KAAK,EACtE,OAAO,YAAY,qBAAqB,IAAI,EAC5C,OAAO,YAAY,sBAAsB,KAAK,EAC9C,OAAO,eAAe,sBAAsB,KAAK,EACjD,OAAO,WAAW,yCAAyC,KAAK,EAChE,YAAY,4BAA4B,EACxC,OAAO,OAAO,YAA6B;AAC1C,WAAO,OAAO,EAAE,GAAG,SAAS,GAAG,KAAK;AAAA,EAAA,CACrC;AACL;;"}